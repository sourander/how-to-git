{"config":{"lang":["fi"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Aloita t\u00e4st\u00e4","text":"<p>Warning</p> <p>For now, this repository contains only Finnish guides, but it may be translated into English in future.</p> <p>T\u00e4m\u00e4 dokumentaatio sis\u00e4lt\u00e4\u00e4 ohjeistukset siihen, kuinka k\u00e4ytt\u00e4\u00e4 Gitti\u00e4 opiskelijana. Kurssin esimerkit perustuvat pitk\u00e4lti Kamitin yll\u00e4pit\u00e4m\u00e4\u00e4n Gitlabiin, mutta samat ohjeet on sovellettavissa Githubiin, Gitlab Cloudiin, muissa organisaatioissa hostattuihin on-prem Gitlab-asennuksiin, Azure DevOpsiin ja niin edelleen. Dokumentaatio on suunniteltu luettavaksi j\u00e4rjestyksess\u00e4 alusta loppuun: avaa vasemmalla n\u00e4kyv\u00e4\u00e4 navigaatiota ja klikkaa linkit l\u00e4pi j\u00e4rjestyksess\u00e4.</p>"},{"location":"#mika-on-git","title":"Mik\u00e4 on git?","text":"<p>Itse <code>git</code> on Linus Torvaldsin kehitt\u00e4m\u00e4 versionhallintaty\u00f6kalu: aiemmin mainitut yritykset tuottavat \"git hosting service\u00e4\". Niiss\u00e4 kaikissa toimii siis sama <code>git</code> konepellin alla, mutta kukin niist\u00e4 tarjoaa muita palveluita sen p\u00e4\u00e4ll\u00e4. Ihan v\u00e4himmill\u00e4\u00e4n ne tarjoavat tunnistautumisen ja jonkin sortin online-portaalin, mutta palveluihin kuuluu my\u00f6s muun muassa vuokrattavaa pilvirautaa, jolla voi suorittaa koodin testausta. </p> <p>Tip</p> <p>T\u00e4m\u00e4 sivusto hy\u00f6dynt\u00e4\u00e4 Githubin palvelua nimelt\u00e4\u00e4n Github Pages, joka luo Github-projektille julkisesti saatavilla olevan dokumentaation.</p> <p>T\u00e4m\u00e4n materiaalin syvent\u00e4v\u00e4n\u00e4 ja tukevana materiaalina kannattaa lukea muuta dokumentaatio ja/tai kirjallisuutta. Yksi \u00e4\u00e4rimm\u00e4isen suositeltu l\u00e4hde on Ilmainen Pro Git PDF-kirja. Joihinkin pattitilanteisiin l\u00f6ytyy n\u00e4pp\u00e4ri\u00e4 ratkaisuita my\u00f6s Oh Shit, Git?!?-sivustolta.</p> <p></p> <p>Kuvio 1: DALL-E 3:n n\u00e4kemys versionhallinnasta.</p>"},{"location":"#mika-git-ei-ole","title":"Mik\u00e4 git ei ole","text":"<p>N\u00e4in Web 2.0 -aikakaudella on hyv\u00e4 korostaa, ett\u00e4: </p> <ul> <li>git ei ole suuryhti\u00f6n online-palvelu, kuten vaikkapa OneDrive, Spotify tai Instagram. </li> <li>Git ei tarjoa suoraan tiedostojen varmuuskopiointia tai synkronointia useiden laitteiden v\u00e4lill\u00e4 kuten OneDrive, Google Drive tai Dropbox. </li> <li>Git:i\u00e4 ei l\u00e4ht\u00f6kohtaisesti k\u00e4ytet\u00e4 selaimella.</li> </ul> <p>Vaikka git ei ole pilvipohjainen palvelu, se voi toimia yhdess\u00e4 sellaisten palveluiden kanssa, kuten Github, Gitlab tai Bitbucket, jotka tarjoavat keskitettyj\u00e4 s\u00e4ilytyspaikkoja gitiin perustuville projekteille. N\u00e4iden palveluiden kautta voidaan jakaa koodia, tehd\u00e4 tiimity\u00f6t\u00e4 ja jopa integroida jatkuva testaus ja k\u00e4ytt\u00f6\u00f6notto. Huomaa, ett\u00e4 konepellin alla toimii silti ihan tavallinen git. Esimerkiksi Gitlab:lla on heid\u00e4n palveluissaan ajettu <code>git init</code>-komento (joskin <code>--bare</code> optionilla), kun luot uuden projektirepon.</p>"},{"location":"#git-ei-ole-ainoa","title":"Git ei ole ainoa","text":"<p>Git on vain yksi versionhallintaty\u00f6kalu monien joukossa. On olemassa muitakin ty\u00f6kaluja, kuten Apache Subversion (<code>svn</code>), Mercury (<code>hg</code>) ja kaupallinen, suljetun l\u00e4hdekoodin Perforce P4, jota k\u00e4ytt\u00e4v\u00e4t eritoten pelinkehitt\u00e4j\u00e4t Unreal Enginen ja CRYENGINE:n kanssa. Git on kuitenkin noussut suosituimmaksi ty\u00f6kaluksi avoimen l\u00e4hdekoodin projekteissa. Tuoreitakin haastajia l\u00f6ytyy, kuten Pijul.</p> <p>Git on tyylilt\u00e4\u00e4n tilannekuva-pohjainen (engl. snapshot) ja hajautettu (engl. distributed). N\u00e4m\u00e4 kaksi ominaisuutta tarkoittavat, ett\u00e4:</p> <ul> <li>Jokainen k\u00e4ytt\u00e4j\u00e4 voi ladata koko projektin historian paikallisesti</li> <li>Muutokset tallennetaan snapshotteina eli tilannekuvina, ei muutospaketteina (engl. patch, changeset)</li> <li>Suorituskyvyn vaatimus on asiakkaan harteilla, ei palvelimen</li> <li>Mahdollistaa offline-ty\u00f6n</li> </ul> <p>N\u00e4iden kahden ominaisuuden vastakohdat ovat <code>Distributed --&gt; Client-Server</code> sek\u00e4 <code>Snapshot --&gt; Patch</code>. Sanasta client-server voi k\u00e4ytt\u00e4\u00e4 my\u00f6s termi\u00e4 centralized, eli keskitetty. Huomaa, ett\u00e4 ei ole olemassa absoluuttisesti hyv\u00e4\u00e4 ja huonoa ominaisuutta, vaan kaiken mukana tulee jokin trade-off. Esimerkiksi Patch-pohjainen keskitetty versionhallinta olisi todenn\u00e4k\u00f6isesti helppok\u00e4ytt\u00f6inen \u2013 mutta me k\u00e4yt\u00e4mme gitti\u00e4, koska se on kent\u00e4ll\u00e4 de facto -standardi.</p>"},{"location":"#antaa-enemman-kuin-ottaa","title":"Antaa enemm\u00e4n kuin ottaa","text":"<p>Git ei ole aluksi helppo k\u00e4ytt\u00e4\u00e4, mutta oikein k\u00e4ytettyn\u00e4 se antaa enemm\u00e4n kuin ottaa. Varmista, ett\u00e4 otat git:n k\u00e4yt\u00f6n haltuun opintojesi aikana: k\u00e4yt\u00e4 sit\u00e4 niin usein kuin mahdollista. Jos teet projektia, k\u00e4yt\u00e4 versionhallintaa. Jos ei ole vahvoja syit\u00e4 k\u00e4ytt\u00e4\u00e4 jotakin muuta versionhallintaty\u00f6kalua, k\u00e4yt\u00e4 git:i\u00e4.</p>"},{"location":"cheat_sheet/","title":"Cheat sheet","text":""},{"location":"cheat_sheet/#yleiset-komennot","title":"Yleiset komennot","text":"<p>T\u00e4ss\u00e4 dokumentissa esitell\u00e4\u00e4n hyvin tiivis lista yleisimmist\u00e4 git-komennoista. Kattavamman, mutta silti yh\u00e4 helppolukuisen listan, l\u00f6yd\u00e4t PDF-muodossa Github: Git Cheat Sheet.</p> <p>Git-komentojen opiskeluun voit hy\u00f6dynt\u00e4\u00e4 my\u00f6s valmiita roadmappeja, kuten Roadmap.sh: Learn Git and Github. KAMK-ymp\u00e4rist\u00f6ss\u00e4 voit korvata Github-moduulit Gitlab:n vastaavilla opeilla; samoilla hakusanoilla l\u00f6ytyy Gitlabin dokumentaatiota.</p> <p>Alussa kannattaa kuitenkin keskitty\u00e4 perusk\u00e4ytt\u00f6\u00f6n. T\u00e4ss\u00e4 on listattu yleisimm\u00e4t komennot, joita tarvitset p\u00e4ivitt\u00e4isess\u00e4 ty\u00f6skentelyss\u00e4 jo opintojen alkuvaiheessa.</p>"},{"location":"cheat_sheet/#aloitus","title":"Aloitus","text":"<p>Tyypillisesti aloitat ty\u00f6skentelyn valitsemalla n\u00e4ist\u00e4 toisen:</p> <ol> <li><code>git init</code>: Luo uuden git-repositorion eli <code>.git/</code> hakemiston.</li> <li><code>git clone &lt;url&gt;</code>: Kloonaa olemassaoleva git-repositorio.</li> </ol> <p>Yksinkertaisempaa on aloittaa Gitlabissa uusi projekti ja kloonata se lokaalisti eli vaihtoehto 2.</p>"},{"location":"cheat_sheet/#aja-naita-usein","title":"Aja n\u00e4it\u00e4 usein","text":"<ul> <li><code>git status -u</code>: N\u00e4ytt\u00e4\u00e4 repositorioon liittyv\u00e4t muutokset.</li> <li><code>git log --oneline</code>: N\u00e4ytt\u00e4\u00e4 commit-historian yhdell\u00e4 rivill\u00e4 per commit.</li> </ul>"},{"location":"cheat_sheet/#stage","title":"Stage","text":"<ul> <li><code>git add &lt;file&gt;</code>: Lis\u00e4\u00e4 tiedosto gitin seurantaan. Jos tiedostoksi on valittu <code>.</code> tai <code>--all</code>, lis\u00e4t\u00e4\u00e4n kaikki muuttuneet tiedostot.</li> <li><code>git add .</code>: Lis\u00e4\u00e4 kaikki uudet tiedostot ja muutokset projektisi sy\u00f6vereist\u00e4 stagingille. Aja ehdottomasti <code>git status</code> ennen t\u00e4t\u00e4 komentoa ja varmista, ettei mukana ole esimerkiksi bin\u00e4\u00e4ritiedostoja, cache-tiedostoja tai muuta pl\u00f6r\u00f6\u00e4.</li> </ul>"},{"location":"cheat_sheet/#commit","title":"Commit","text":"<ul> <li><code>git commit -m \"message\"</code>: Tallentaa muutokset commitiksi. <code>-m</code>-flagiin voi kirjoittaa commit-viestin.</li> </ul>"},{"location":"cheat_sheet/#lokaali-remote","title":"Lokaali --&gt; Remote","text":"<ul> <li><code>git push</code>: L\u00e4hett\u00e4\u00e4 nykyisen branchin lokaalit commitin remote-repositorioon.</li> </ul>"},{"location":"cheat_sheet/#lokaali-remote_1","title":"Lokaali &lt;-- Remote","text":"<p>Note</p> <p>Alla olevissa komennoissa oletetaan, ett\u00e4 olet asettanut <code>pull.ff=only</code>-asetuksen. Jos olet ep\u00e4varma, k\u00e4y lukemassa Asennus/Konfiguraatio-luvusta ohje.</p> <ul> <li><code>git pull</code>: Hakee muutokset remote-repositoriosta ja yhdist\u00e4\u00e4 ne lokaaleihin muutoksiin. Jos t\u00e4m\u00e4 antaa varoituksen, olet todenn\u00e4k\u00f6isesti kohdannut konfliktin. K\u00e4yt\u00e4 alla olevaa komentoa.</li> <li><code>git pull --no-ff</code>: Ohittaa <code>pull.ff=only</code>-asetuksen eli pakottaa mergen. Git lis\u00e4\u00e4 konfliktoiviin tiedostoihin rivej\u00e4, jotka osoittavat, mit\u00e4 on muuttunut ja miss\u00e4. Ratkaise konfliktit, lis\u00e4\u00e4 tiedostot stagingille, commitoi ja puske remoteen. Katso ohje K\u00e4ytt\u00f6/Gitlab: Ryhm\u00e4k\u00e4yt\u00f6nohje-luvusta.</li> </ul> <p>Huomaa, ett\u00e4 <code>git pull</code> on yhdistelm\u00e4 komennoista <code>git fetch</code> ja <code>git merge</code>. <code>git fetch</code> hakee muutokset remote-repositoriosta ja <code>git merge</code> yhdist\u00e4\u00e4 ne lokaaleihin muutoksiin.</p>"},{"location":"cheat_sheet/#branch","title":"Branch","text":"<p>Pienten sooloprojektien kanssa p\u00e4rj\u00e4\u00e4t pelk\u00e4ll\u00e4 <code>main</code> branchilla. Kun tekij\u00f6it\u00e4 on enemm\u00e4n, branchit auttavat eri osa-alueiden erottamisessa ja yhdist\u00e4misess\u00e4.</p> <ul> <li><code>git branch -v</code>: N\u00e4ytt\u00e4\u00e4 branchit ja kertoo, miss\u00e4 branchissa olet.</li> <li><code>git switch &lt;branchname&gt;</code>: Vaihtaa branchia.</li> </ul> <p>Tip</p> <p>Voit luoda branchit Gitlabin web-k\u00e4ytt\u00f6liittym\u00e4ss\u00e4. T\u00e4ll\u00f6in saat ne helposti kytketty\u00e4 Issueen, jonka ne ratkaisevat. T\u00e4h\u00e4n l\u00f6ytyy video-ohje K\u00e4ytt\u00f6/Gitlab: Ryhm\u00e4k\u00e4yt\u00f6nohje-luvusta. </p>"},{"location":"asennus/konfiguraatio/","title":"Konfiguraatio","text":"<p>Ennen kuin voit k\u00e4ytt\u00e4\u00e4 gitti\u00e4 versionhallintaan, sinun on pakko asettaa v\u00e4hint\u00e4\u00e4n seuraavat kaksi (tietokoneen skoopissa) globaalia asetusta. Vaihdathan lainausmerkkien sis\u00e4lle omat tietosi.</p> <pre><code>git config --global user.name \"Etunimi Sukunimi\"\ngit config --global user.email \"etunimisukunimi@kamk.fi\"\n</code></pre> <p>Tiedot tallentuvat globaaliin konfiguraatiotiedostoon kotikansiossasi. Tiedosto on <code>~/.gitconfig</code>.</p>"},{"location":"asennus/konfiguraatio/#konfiguraatioiden-tarkistaminen","title":"Konfiguraatioiden tarkistaminen","text":"<p>Lokaalit eli yhden git-repositorion sis\u00e4iset asetukset saa n\u00e4kyville alla olevalla komennolla. T\u00e4m\u00e4 komento kuuluu ajaa siis kansiossa, jossa sinulla on git-versionhallittu projekti, kuten vaikkapa <code>~/Code/sukunimi/amazingproject/</code>. N\u00e4m\u00e4 l\u00f6ytyv\u00e4t tiedostosta <code>&lt;\u00e4skeinenkansio&gt;/.git/config</code></p> <pre><code>git config --local --list\n</code></pre> <p>Koko j\u00e4rjestelm\u00e4tason oletukset, joiden pohjalta uuden projektin lokaali konfiguraatio muodostetaan, l\u00f6ytyy Windowsilla polusta <code>C:\\Program Files\\Git\\etc\\gitconfig</code>. Ne voi tulostaa seuraavalla komennolla:</p> <pre><code> git config --system --list\n</code></pre> <p>Koko j\u00e4rjestelm\u00e4tason omat asetukset, joita juuri \u00e4sken asetit kaksi (<code>user.name</code> ja <code>user.email</code>), l\u00f6ytyv\u00e4t tiedostosta <code>~/config</code>, jossa aaltomerkki edustaa sinun kotikansiotasi (eli <code>C:\\Users\\username\\</code>). N\u00e4m\u00e4 voit tarkistaa komennolla:</p> <pre><code>git config --global --list\n</code></pre>"},{"location":"asennus/konfiguraatio/#suositellut-konfiguraatiot","title":"Suositellut konfiguraatiot","text":"<p>Gitti\u00e4 voi konfiguroida monin tavoin. Alla on esiteltyn\u00e4 muutama, \u00e4\u00e4rimm\u00e4isen suositeltu konfiguraatio.</p>"},{"location":"asennus/konfiguraatio/#rivinvaihdot","title":"Rivinvaihdot","text":"<p>Windowsissa rivinvaihto - eli enterin painaminen tekstitiedostoa muokatessa - kirjoittaa tiedostoon kaksi merkki\u00e4: <code>CR</code> ja <code>LF</code>, jotka tunnetaan nimill\u00e4 <code>Carriage Return</code> ja <code>Line Feed</code>. UNIX-pohjaisissa k\u00e4ytt\u00f6j\u00e4rjestelmiss\u00e4 k\u00e4ytet\u00e4\u00e4n vain toista merkki\u00e4 eli <code>LF</code>.  T\u00e4m\u00e4 usein on jo valmiiksi Git for Windows -asennuksessa oikein asetettuna. Alla oleva konfiguraatio asettaa rivinvaihdot siten, ett\u00e4 ne ovat sinun koneellasi sinun k\u00e4ytt\u00f6j\u00e4rjestelm\u00e4lle tutussa formaatissa. T\u00e4m\u00e4 on usein hyv\u00e4 default. Lue alta poikkeus.</p> <pre><code># Windows\ngit config --global core.autocrlf true\n\n# Linux tai macOS\ngit config --global core.autocrlf input\n</code></pre> <p>Poikkeustilanne: hostin ja kontin v\u00e4liset eroavaisuudet</p> <p>Yll\u00e4 olevaan konfiguraatioon l\u00f6ytyy poikkeustilanne. T\u00e4m\u00e4 tarkoittaa, ett\u00e4 jos ty\u00f6skentelet Windowsisssa siten, ett\u00e4 kirjoittamasi koodi ajetaan UNIX-pohjaisessa ymp\u00e4rist\u00f6ss\u00e4 (esim. Docker-kontti, Linux-virtuaalikone), on t\u00e4rke\u00e4\u00e4 varmistaa, ett\u00e4 rivinvaihdot ovat <code>LF</code>-muodossa. Muutoin siirr\u00e4t kontin sis\u00e4\u00e4n (esim. mountilla <code>-v &lt;host_path&gt;:&lt;container_path&gt;</code>) tiedostoja, joissa rivinvaihdot ovat v\u00e4\u00e4r\u00e4ss\u00e4 muodossa. Koodin suoritus tulee kaatumaan. Aloita luomalla projektikansiosi juureen seuraavanlainen konfiguraatiotiedosto, jonka nimi on pakko olla <code>.gitattributes</code>. Lis\u00e4\u00e4 v\u00e4hint\u00e4\u00e4n ensimm\u00e4inen rivi, kuten alla neuvottu, ja tarpeen mukaan sille poikkeuksia, kuten on my\u00f6s neuvottu koodisnippetiss\u00e4.</p> .gitattributes<pre><code># Lis\u00e4\u00e4 t\u00e4m\u00e4 rivi tiedostoon:\n* text=auto eol=lf\n\n# Jos jonkin tiedoston on pakko olla Windows-rivinvaihdollinen,\n# lis\u00e4\u00e4 sille poikkeuksia n\u00e4in:\n*.bat eol=crlf\n*.ps1 eol=crlf\n# ... jne ....\n</code></pre> <p>Seuraavaksi pakota VS Code k\u00e4ytt\u00e4m\u00e4\u00e4n t\u00e4t\u00e4 konfiguraatiota. Avaa VS Code ja luo projektiisi uusi tiedosto polkuun <code>.vscode/settings.json</code>. T\u00e4m\u00e4 tiedosto on VS Codelle viesti, ett\u00e4 haluat k\u00e4ytt\u00e4\u00e4 projektikohtaisia poikkeusasetuksia. Lis\u00e4\u00e4 tiedostoon seuraavat rivit:</p> .vscode/settings.json<pre><code>{\n    \"files.eol\": \"\\n\"\n}\n</code></pre> <p>N\u00e4in olet pakottanut VS Coden k\u00e4ytt\u00e4m\u00e4\u00e4n UNIX-tyylist\u00e4 rivinvaihtoa. T\u00e4m\u00e4 muutos ei koska olemassaolevia tiedostoja. Kenties helpoin tapa korjata t\u00e4m\u00e4 on:</p> <ol> <li>Lis\u00e4\u00e4 tuoreet muutokset gittiin (git add, commit, push)</li> <li>Tuhoa koko hakemisto</li> <li>Kloonaa projekti uusiksi, jolloin muutokset tulevat voimaan.s</li> </ol> <p>V\u00e4lt\u00e4 jatkossa muokkaamasta kyseisen projektin tiedostoja muilla ohjelmilla kuin VS Codella.</p>"},{"location":"asennus/konfiguraatio/#pullin-strategia","title":"Pullin strategia","text":"<p>Mik\u00e4li ajat komennon <code>git pull</code> tai <code>git pull origin main</code> ennen omaa <code>git push</code>-komentoa, aiheutat herk\u00e4sti odottamattomia committeja. Lue lis\u00e4\u00e4 aiheesta t\u00e4\u00e4ll\u00e4: Why You Should Use git pull --ff-only | sffc's Tech Blog. Hyv\u00e4 yleisvarma tapa ratkaista ongelma on asettaa seuraava konfiguraatio paikoilleen:</p> <pre><code>git config --global pull.ff only\n</code></pre>"},{"location":"asennus/konfiguraatio/#tekstieditori","title":"Tekstieditori","text":"<p>Kun luot esimerkiksi git commitin komennolla <code>git commit</code>, aukeaa tekstieditori. T\u00e4m\u00e4 editori on todella usein vakiona <code>vi</code> tai <code>vim</code>, mik\u00e4 saattaa olla aloittelijan silmiss\u00e4 hankala ty\u00f6kalu. Voit vaihtaa sen huomattavasti helpompaan <code>nano</code>-nimiseen ohjelmaan n\u00e4in:</p> <pre><code>git config --global core.editor \"nano\"\n</code></pre>"},{"location":"asennus/konfiguraatio/#oletushaaran-eli-branchin-nimi","title":"Oletushaaran eli branchin nimi","text":"<p>Git k\u00e4ytt\u00e4\u00e4 vakiona yh\u00e4 <code>master</code>-nimist\u00e4 (tarkista: <code>git config --system init.defaultBranch</code>) nime\u00e4 vakiohaaralle, joka luodaan kun teet kansiosta git-versionhallitun projektin k\u00e4skyll\u00e4 <code>git init</code>. T\u00e4m\u00e4 on ongelmallinen kahdesta syyst\u00e4:</p> <ol> <li>Inklusiivisuus. Master-sanalla on huono historia.</li> <li>K\u00e4yt\u00e4nn\u00f6llisyys. GitHub, GitLab ja muut git-palvelua tuottavat yritykset ovat siirtyneet pitk\u00e4lti <code>main</code>-nimeen. On k\u00e4yt\u00e4n\u00f6llist\u00e4 pit\u00e4\u00e4 heti alusta alkaen oma repositorio samankaltaisena kuin heid\u00e4n oletuksensa.</li> </ol> <p>Oletuksen voi vaihtaa seuraavalla komennolla:</p> <pre><code>git config --global init.defaultBranch main\n</code></pre>"},{"location":"asennus/mac/","title":"Mac","text":""},{"location":"asennus/mac/#kayta-z-shellia","title":"K\u00e4yt\u00e4 Z Shelli\u00e4","text":"<p>Z Shellin (<code>zsh</code>) pit\u00e4isi olla macOS:ss\u00e4 nykyisin default, mutta voi my\u00f6s olla, ett\u00e4 Terminal k\u00e4ynnist\u00e4\u00e4 kilpailevan shellin eli <code>bash</code>:n. Mik\u00e4li n\u00e4in on, macOS:n pit\u00e4isi neuvoa sinua ajamaan komento, joka n\u00e4kyy alla. Aja komento ja k\u00e4ynnist\u00e4 Terminal uusiksi.</p> <pre><code>$ chsh -s /bin/zsh\n</code></pre>"},{"location":"asennus/mac/#asenna-homebrew","title":"Asenna Homebrew","text":"<p>Homebrew on vastaavanlainen paketinhallinta kuin Snap, Flatpak, Chocolatey tai jopa Ubuntusta tuttu ATP tai Red Hatist\u00e4 tuttu DNF. Valitettavasti macOS:ss\u00e4 ei ole valmiina omaa, joten avoimen l\u00e4hdekoodin yhteis\u00f6 on luonut puutteen tilalle Homebrew:n. Sit\u00e4 k\u00e4ytet\u00e4\u00e4n asentamaan, p\u00e4ivitt\u00e4m\u00e4\u00e4n, hallinnoimaan ja poistamaan sovelluksia. Useimpia ohjelmistonkehitykseen tai shell-komentoihin liittyvi\u00e4 sovelluksia et l\u00f6yd\u00e4 AppStoresta vaan ne tulee asentaa Homebrew:n tai vastaavan avulla. Jos haluat tarkat asennusohjeet, lue mac.install.guide-sivuston: Install Homebrew Complete Guide. Jos olet pelkk\u00e4\u00e4 asennuskomentoa vailla, aja Homebrew:n kotisivuilta l\u00f6ytyv\u00e4 komento:</p> <pre><code># Homebrew:n asennuskomento on bashill\u00e4 ajettava shell-skripti. T\u00e4m\u00e4 komento lataa ja ajaa sen.\n# Tuloste sis\u00e4lt\u00e4\u00e4 ohjeistusta ja tietoja asennuksesta. Lue se! Alla lyhennelm\u00e4:\n$ /bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\"\n==&gt; This script will install:\n/opt/homebrew/bin/brew\n...\n==&gt; The following new directories will be created:\n/opt/homebrew/bin\n/opt/homebrew/etc\n...\n</code></pre> <p>HUOM! Jos olet joskus ajanut komennon <code>xcode-select --install</code>, joka asentaa Linux-maailmasta tuttuja komentorivilt\u00e4 ajettavia sovelluksia kuten <code>gcc</code> sek\u00e4 <code>clang</code>. Mik\u00e4li et, Homebrew:n asennus k\u00e4ynnist\u00e4\u00e4 XCode Command Line Tools:n asennuksen. Homebrew tarvitsee n\u00e4it\u00e4 ohjelmia.</p> <p>Lue asennuksen tarjoamat ohjeet tarkkaan. Asennus pyyt\u00e4\u00e4 sinua lis\u00e4\u00e4m\u00e4\u00e4n yhden rivin .zprofile-tiedostoon, joka voi olla tai voi olla olematta k\u00e4yt\u00f6ss\u00e4 vakiona. Rivi n\u00e4ytt\u00e4\u00e4 muutoin samalta kuin alla oleva, mutta alla olevassa on mukana kommentti. Suosittelen pit\u00e4m\u00e4\u00e4n <code>.zprofile</code> ja <code>.zshrc</code> tiedostot kommentoituina, jotta tied\u00e4t mit\u00e4 mik\u00e4kin rivi tekee, ja miksi olet sen sinne lis\u00e4nnyt.</p> <pre><code># .zprofile sis\u00e4lt\u00f6 alla:\n\n# Add Homebrew-related env variables\neval \"$(/opt/homebrew/bin/brew shellenv)\"\n</code></pre> <p>Jatkossa ymp\u00e4rist\u00f6muuttujan <code>$PATH</code> pit\u00e4isi sis\u00e4lt\u00e4\u00e4 Homebrew:n asennuskansio. Voit tarkistaa t\u00e4m\u00e4n seuraavalla komennolla. Tulosteen pit\u00e4isi sis\u00e4lt\u00e4\u00e4 kansio <code>/opt/homebrew/bin</code> jos sinulla on ARM-sirullinen Apple. Vanhemmissa Intel-pohjaisissa koneissa asennuskansio on <code>/usr/local</code>. Asennuskansion pit\u00e4isi olla sinulle tuttu, mik\u00e4li luit aiempien komentojen tulosteen.</p> <pre><code>$ echo $PATH | tr \":\" \"\\n\"\n/opt/homebrew/bin\n/opt/homebrew/sbin\n/usr/local/bin\n...\n</code></pre>"},{"location":"asennus/mac/#asenna-git","title":"Asenna git","text":"<p>Python-koodi kannattaa pist\u00e4\u00e4 l\u00e4hes poikkeuksetta gittiin, ja t\u00e4m\u00e4 on usein my\u00f6s eri kursseilla teht\u00e4v\u00e4nantojen oletus. Xcode:n mukana tulee Applen oma h\u00f6yste <code>git</code>-ty\u00f6kalusta, mutta suosittelen asentamaan Homebrew:n hallinnoiman version.</p> <pre><code># Asenna\n$ brew install git\n\n# Tarkista ett\u00e4 on asentunut\n$ git --version\ngit version 2.42.0\n\n# Varmista, ett\u00e4 lokaationa on nimenomaan Homebrew:n asennuskansio\n# EI SIIS /usr/bin/git vaan alla n\u00e4kyv\u00e4 tuloste\n$ type git\ngit is /opt/homebrew/bin/git\n\n# Mik\u00e4li yll\u00e4 oleva tuloste viittaa /usr/bin-kansion executableen, aja seuraava\n# komento ja kokeile uusiksi\n$ rehash\n</code></pre>"},{"location":"asennus/mac/#valinnainen-apple-keychain-passphraseille","title":"Valinnainen: Apple Keychain passphraseille","text":"<p>Passphrasen t\u00e4ytt\u00e4minen joka git- tai sshs-komennon yhteydess\u00e4 on \u00e4rsytt\u00e4v\u00e4\u00e4. T\u00e4h\u00e4n l\u00f6ytyy ratkaisuna ssh-agent. MacOS:ss\u00e4 on mahdollista k\u00e4ytt\u00e4\u00e4 Applen omaa Keychaini\u00e4 s\u00e4il\u00f6n\u00e4 n\u00e4ille avaimille.</p> <p>Nyky\u00e4\u00e4n vakio shelli macOS:ss\u00e4 on Z Shell eli lyhyemmin <code>zsh</code> - t\u00e4m\u00e4 on siis Bashin korvaaja macOS:ss\u00e4. Helppo tapa ratkaista avaimien s\u00e4il\u00f6minen Keychainiin on asentaa <code>Oh My Zsh</code>-niminen framework shell-konfiguraation hallintaan, ja pyyt\u00e4\u00e4 sen pluginia hoitamaan koko homman.</p> <p>Asenna Oh My Zsh sen oman sivuston ohjeiden mukaan. Sinun tarvitsee ajaa vain yksi komento.</p> <p>T\u00e4m\u00e4n j\u00e4lkeen lis\u00e4\u00e4 seuraavat rivit <code>.zshrc</code>-tiedostoon:</p> <pre><code># Choose Oh My Zsh plugins as whitespace list\n# Example:\n# plugins=(a-plugin another-plugin third-plugin)\nplugins=(ssh-agent)\n\n# Tell ssh-agent plugin to use Keychain.\nzstyle :omz:plugins:ssh-agent ssh-add-args --apple-load-keychain\n\n# Yll\u00e4 olevien rivien pit\u00e4isi olla tiedostossa ENNEN seuravaanlaista rivi\u00e4:\n# source $ZSH/oh-my-zsh.sh\n</code></pre> <p>T\u00e4m\u00e4n j\u00e4lkeen voit lis\u00e4t\u00e4 avaimen passphrasen macOS:n keychainiin: <pre><code>$ ssh-add --apple-use-keychain ~/.ssh/id_ed25519\n  Enter passphrase for /Users/username/.ssh/id_ed25519: *******\n  Identity added: /Users/username/.ssh/id_ed25519 (etunimisukunimi@kamk.fi macbook)\n</code></pre></p>"},{"location":"asennus/mac/#valinnainen-git-credential-manager-core","title":"Valinnainen: Git Credential Manager Core","text":"<p>Git Credential Manager Core on ohjelma, joka auttaa sinua kirjautumaan git-palveluihin. Se on erityisen hy\u00f6dyllinen, jos haluat kirjautua esimerkiksi GitHubiin HTTPS:n avulla.</p> <pre><code>brew tap microsoft/git \nbrew cask install git-credential-manager-core\n</code></pre>"},{"location":"asennus/mac/#valinnainen-asenna-oh-my-zsh","title":"Valinnainen: Asenna Oh My Zsh","text":"<p>Mik\u00e4li haluat k\u00e4ytt\u00e4\u00e4 ssh-agenttia, helpoin tapa siihen Z Shellin kanssa on Oh My Zsh, joka on Zsh:n konfiguraatioden hallintaa varten luotu framework.</p>"},{"location":"asennus/win/","title":"Win","text":"<p>Asenna Git client: Git for Windows. Eth\u00e4n klikkaa autopilotilla <code>Next</code>-nappulaa, vaan toimit tunnollisen it-alan ammattilaisen tavoin ja luet kaikki vaihtoehdot l\u00e4pi. Kiinnit\u00e4 huomiota erityisesti seuraavissa kuvissa n\u00e4kyviin vaihtoehtoihin. Asetukset s\u00e4\u00e4t\u00e4v\u00e4t j\u00e4rjestelm\u00e4tason defaultteja ja tulevat kaikkiin konfiguraatiohin jatkossa defaulttina.</p>"},{"location":"asennus/win/#suositellut-asetukset-muuttaa","title":"Suositellut asetukset muuttaa","text":""},{"location":"asennus/win/#default-editor","title":"Default Editor","text":"<p>Kuvio 1: Asennus pyyt\u00e4 sinua valitsemaan default editorin muun muassa commit messagejen kirjoittamista varten. Vakiona tarjottu vim ei ole aloittelijoita varten. On suositeltavaa valita Nano tai esimerkiksi Notepad++ (jos on asennettuna). Nano:lla p\u00e4\u00e4see pitk\u00e4lle.</p>"},{"location":"asennus/win/#init-branch","title":"Init branch","text":"<p>Kuvio 2: Oletusbranchin nimi kannattaa vaihtaa vastaamaan nykyp\u00e4iv\u00e4n standardia eli <code>main</code>. Juuri kukaan ei en\u00e4\u00e4 k\u00e4yt\u00e4 sanaa master.</p>"},{"location":"asennus/win/#pull-ff","title":"Pull FF","text":"<p>Kuvio 3: On suositeltavaa, ett\u00e4 et anna Gitin luoda mergej\u00e4 sinun pyyt\u00e4m\u00e4tt\u00e4si, ellei nimenomaan fast-forward onnistu.</p>"},{"location":"asennus/win/#asennuksen-jalkeen","title":"Asennuksen j\u00e4lkeen","text":"<ol> <li>K\u00e4ynnist\u00e4 asentamisen j\u00e4lkeen tietokone uusiksi.</li> <li>K\u00e4ynnist\u00e4 Start-menusta Git Bash.</li> <li>Testaa <code>git --version</code></li> <li>Kun ohjelmisto on asennettu, siirry lukuun Konfiguraatio.</li> </ol> <p>Mik\u00e4li luit asennuksen tarjoamat vaihtoehdot huolella, ja asetit sinulle sopivat (tai suositellut) asetukset, s\u00e4\u00e4styt varsinaisessa konfiguraatioiden laittamisessa yll\u00e4tt\u00e4v\u00e4n helpolla.</p>"},{"location":"asennus/win/#advanced-ssh-agent","title":"Advanced: SSH Agent \ud83d\udc80","text":"<p>Warning</p> <p>T\u00e4m\u00e4 osio on tarkoitettu heille, jotka: </p> <ul> <li>haluavat v\u00e4ltty\u00e4 kirjoittamasta SSH passphrasea jokaisen git- tai ssh-komennon yhteydess\u00e4 uudestaan ja uudestaan</li> <li>haluavat k\u00e4ytt\u00e4\u00e4 VS Code Dev Containers -ominaisuutta siten, ett\u00e4 SSH toimii kontissa, mahdollistaen git-ty\u00f6skentelyn</li> <li>tiet\u00e4v\u00e4t, mik\u00e4 on PATH-ymp\u00e4rist\u00f6muuttuja</li> </ul> <p>Jos et tied\u00e4, mit\u00e4 aiemmat rimpsut tarkoittavat, t\u00e4m\u00e4 loppusivu on tuskin sinua varten - sinut kenties neuvotaan t\u00e4nne my\u00f6hemmiss\u00e4 vaiheissa opiskelua.</p>"},{"location":"asennus/win/#pohjustus","title":"Pohjustus","text":"<p>Aloitetaan pohjustamalla hieman, miksi t\u00e4ss\u00e4 on niin monta vaihetta. Kun asennat Git for Windowsin, se kysyy asennuksen aikana, ett\u00e4:</p> <pre><code>[x] Use bundled OpenSSH\n\n    This uses ssh.exe that comes with Git.\n\n[ ] Use external OpenSSH\n\n    NEW! This uses an external ssh.exe. Git will not install its own OpenSSH\n    (and related) binaries but use them as found on PATH.\n</code></pre> <p>En ole yll\u00e4 neuvonut vaihtamaan t\u00e4t\u00e4 asetusta toiseksi, koska  en halua ensimm\u00e4ist\u00e4 kertaa gitti\u00e4 k\u00e4ytt\u00e4ville turhaa asetusty\u00f6t\u00e4, ja koska  muut ty\u00f6kalut, kuten TortoiseGit, saattavat asentaa uusia <code>ssh.exe</code>-tiedostoja <code>PATH</code>:iin muutenkin. N\u00e4inp\u00e4 sinun tulee osata itse varmistaa, ett\u00e4 git ja ssh komennot k\u00e4ytt\u00e4v\u00e4t juuri sit\u00e4 bin\u00e4\u00e4ri\u00e4, mit\u00e4 sin\u00e4 haluat niiden k\u00e4ytt\u00e4v\u00e4n. Ja t\u00e4m\u00e4h\u00e4n ratkotaan tyypillisesti <code>PATH</code>-ymp\u00e4rist\u00f6muuttujalla, mutta toki asiaan voi vaikuttaa muutkin seikat, kuten <code>GIT_SSH</code>-ymp\u00e4rist\u00f6muuttuja tai Git global configit. Kurkataan vaiheittain, miten t\u00e4m\u00e4 tehd\u00e4\u00e4n. Aloitetaan kuitenkin tutustumalla siihen, mit\u00e4 <code>where ssh</code>-komento kertoo ennen kuin teemme mit\u00e4\u00e4n muuta.</p> <p></p> <p>Kuvio 4: Where ssh palauttaa kaikki PATH:sta l\u00f6ytyv\u00e4t <code>ssh.exe</code>-tiedostot siin\u00e4 j\u00e4rjestyksess\u00e4, miss\u00e4 ne l\u00f6ytyiv\u00e4t. Ylin ajetaan vakiona.</p> <p></p> <p>Kuvio 5: Huomaa, ett\u00e4 <code>Program Files\\</code>-hakemistoon asennettu OpenSSL on tyystin eri sovellus kuin <code>System32\\</code>-hakemistosta l\u00f6ytyv\u00e4 LibreSSL.</p> <p>Mit\u00e4 t\u00e4st\u00e4 hy\u00f6dymme? Microsoftin hallinnoima <code>ssh.exe</code> osaa temppuja, joita t\u00e4ysin avoimen l\u00e4hdekoodin versio ei osaa:</p> <ul> <li> K\u00e4ynnist\u00e4\u00e4 SSH-agentin (<code>ssh-agent.exe</code>) Windowsin bootissa</li> <li> Tallentaa ja noutaa avaimia sek\u00e4 passphraseja Windowsin omasta backendist\u00e4</li> </ul>"},{"location":"asennus/win/#ssh-client","title":"SSH Client","text":"<p>Jos <code>where ssh</code>-komento ei l\u00f6yd\u00e4 Microsoftin versiota <code>ssh.exe</code>:st\u00e4, asenna se. Klikkaa Win+X, valitse System ja sitten Optional features. Jos listalta ei l\u00f6ydy haulla OpenSSH Clienti\u00e4, lis\u00e4\u00e4 se.</p>"},{"location":"asennus/win/#agentti","title":"Agentti","text":"<p>Kuvio 6: Windowsin Run-kent\u00e4n avulla voi ajaa komentoja. T\u00e4ll\u00e4 kertaa tarvitsemme Service Managementti\u00e4.</p> <p></p> <p>Kuvio 7: Services-listasta l\u00f6ytyy O-kirjaimen kohdalta OpenSSH Authentication Agent. Se on vakiona Disabled.</p> <p>Paina Win+R ja kirjoita kentt\u00e4\u00e4n <code>services.msc</code>. Aukeaa Service (Management) -ikkuna, josta sinun tulee etsi\u00e4 OpenSSH Authentication Agent. N\u00e4ist\u00e4 vaiheista on kaksi kuvaa yll\u00e4 (Kuvio 6 ja 7).</p> <p></p> <p>Kuvio 8: Vaihda agentin start-up -tilaksi Automatic ja paina Apply. T\u00e4m\u00e4n j\u00e4lkeen Start-nappi muuttuu klikattavaksi. Klikkaa sit\u00e4.</p> <p>OpenSSH Authentication Agent tulee aktivoida, jotta <code>ssh-agent.exe</code> on ajossa jatkossa aina Windowsin k\u00e4ynnistyess\u00e4. Muistutan viel\u00e4, ett\u00e4 t\u00e4ss\u00e4 on kyse siit\u00e4 <code>System32/</code>-hakemiston alla l\u00f6ytyv\u00e4st\u00e4 <code>ssh-agent.exe</code>-tiedostosta, ja <code>ssh.exe</code>-tiedostosta joka tuota kutsuu. Ei siis siit\u00e4 Git:n asentamasta. Aktivointiin n\u00e4kyy ohjeet yll\u00e4 olevassa kuvassa ja sen kuvatekstiss\u00e4.</p> <p>Tip</p> <p>T\u00e4m\u00e4n vaiheen voi tehd\u00e4 my\u00f6s PowerShell-komennoilla n\u00e4in:</p> <pre><code>Get-Service ssh-agent | Set-Service -StartupType Automatic\nStart-Service ssh-agent\n</code></pre>"},{"location":"asennus/win/#tuunaa-polkusi","title":"Tuunaa polkusi","text":"<p>Jos avaat Command Promptin tai PowerShellin, niin t\u00e4ll\u00e4 hetkell\u00e4 sinulla pit\u00e4isi olla tilanne, ett\u00e4 <code>ssh -V</code> vastaa <code>OpenSSH_for_Windows_9.5p1, LibreSSL 3.8.2</code>. Testaa t\u00e4m\u00e4! Jos n\u00e4in ei ole, lis\u00e4\u00e4 <code>%WINDIR%\\System32\\OpenSSH\\</code> Windowsin ymp\u00e4rist\u00f6muuttujan <code>PATH</code> ylimm\u00e4ksi elementiksi.</p> <p>Valitettavasti Git Bash lis\u00e4\u00e4 PATH-ymp\u00e4rist\u00f6muuttujan polkuun useita hakemistopolkuja, joista yksi (<code>/usr/bin/</code>) sis\u00e4lt\u00e4\u00e4 <code>ssh.exe</code>-tiedoston. Koska t\u00e4m\u00e4 polku on ennen Windowsin Environment Variableseja, et voi korjata t\u00e4t\u00e4 kokonaan Windowsin p\u00e4\u00e4st\u00e4. T\u00e4m\u00e4n voi korjata ainakin kahdella tavalla:</p> <ol> <li>Asenna Git for Windows uusiksi \ud83d\ude25</li> <li>Muokkaa PATH:ia Bashin startup-tiedostossa. \ud83e\udd13</li> </ol> <p>Me olemme coolej\u00e4 n\u00f6rttej\u00e4, joten valitsemme j\u00e4lkimm\u00e4isen. Aja alla n\u00e4kyv\u00e4 komento, joka lis\u00e4\u00e4 (append) rivin <code>PATH=\"/c/WINDOWS/System32/OpenSSH:$PATH</code> tiedoston <code>C:\\Users\\kayttajanimesi\\.bashrc</code> loppuun. Jos et tied\u00e4 mik\u00e4 t\u00e4m\u00e4 tiedosto on, sinulla ei ole sellaista. T\u00e4ll\u00f6in komento luo tiedoston sinulle.</p> <pre><code>echo 'export PATH=\"/c/WINDOWS/System32/OpenSSH:$PATH\"' &gt;&gt; ~/.bashrc\n</code></pre> <p>Warning</p> <p>Sulje ja avaa uusiksi Git Bash. Kyseinen <code>.bashrc</code>-tiedosto ladataan aina uuden Git Bash -istunnon yhteydess\u00e4. Bash saattaa valittaa sinulle, ett\u00e4 se haluaa luoda <code>.bash_profile</code>-tiedoston sinulle: t\u00e4t\u00e4 varoitusta ei en\u00e4\u00e4 jatkossa tule.</p> <p></p> <p>Kuvio 9: Lopulta on hyv\u00e4 tehd\u00e4 sanity check. Ssh:n pit\u00e4isi l\u00f6yty\u00e4 oikeasta polusta, ja vastata <code>ssh -V</code>-komentoon odotetulla tavalla kaikissa k\u00e4ytt\u00e4miss\u00e4si shelleiss\u00e4. Kuvassa Git Bash, Command Prompt ja Windows PowerShell.</p>"},{"location":"asennus/win/#agentti-kayttoon","title":"Agentti k\u00e4ytt\u00f6\u00f6n","text":"<p>T\u00e4ss\u00e4 vaiheessa oletetaan, ett\u00e4 sinulla on jo avain olemassa, ja avaimella on passphrase, ja vain on viety Kamit GitLabiin (repo.kamit.fi). Jos ei, kurkkaa Tunnistautuminen/SSH/Avaimen Luonti ohjeet avaimet tekemiseen. Voit kokeilla, ett\u00e4 SSH l\u00f6yt\u00e4\u00e4 yh\u00e4 avaimesi sen vakiolokaatiosta (<code>~/.ssh/id_{algoritmi}</code>) ajamalla komennon:</p> <pre><code>winpty ssh -T ssh://git@repo.kamit.fi:45065\n</code></pre> <p>Note</p> <p>Minulla t\u00e4m\u00e4 Microsoftin ssh.exe j\u00e4\u00e4tyi ilman <code>winpty</code>:t\u00e4, kun se yritti kysy\u00e4 passphrasea, eik\u00e4 mit\u00e4 ilmeisemmin saanut popuppia auki.</p> <p>Mik\u00e4li ajat komennon useita kertoja, se kysyy passphrasea joka kerta. Miksi? Koska avainta ei ole lis\u00e4tty agenttiin, vaikka se on ajossa. Jos kirjoitat <code>ssh-add -L</code>, se kertoo, ett\u00e4 <code>The agent has no identities</code>. Let's fix this!</p> <pre><code>ssh-add ~/.ssh/id_ed25519\n</code></pre> <p>Kun ajat yll\u00e4 olevan, passphrase kysyt\u00e4\u00e4n sinulta viimeisen kerran. Jatkossa voit ajaa <code>ssh -T ssh://git@repo.kamit.fi:45065</code> ja <code>ssh.exe</code> l\u00f6yt\u00e4\u00e4 avaimen salasanoineen agentin muistista. Jos k\u00e4ynnist\u00e4t koneen uusiksi, komennon <code>ssh-add -L</code> pit\u00e4isi yh\u00e4 listata sinun avaimesi ja passphrasen pit\u00e4isi yh\u00e4 tulla suoraan agentilta. K\u00e4yt\u00e4nn\u00f6ss\u00e4 voisit nyt vaikka poistaa koko <code>~/.ssh/id_ed25519</code>-tiedoston, ja SSH toimisi yh\u00e4, koska avain ladataan agentilta.</p>"},{"location":"asennus/win/#git","title":"Git","text":"<p>Testaa my\u00f6s, ett\u00e4 jonkin sinun repositorion kloonaaminen pelaa. Kaiken j\u00e4rjen mukaan t\u00e4ss\u00e4 vaiheessa ei pit\u00e4isi tulla juurikaan ongelmia, koska git etsii ssh:ta PATH:sta - ja seh\u00e4n me ollaan juuri tarkistettu kuntoon.</p> <pre><code># T\u00e4yt\u00e4 urliksi jokin repositorio, mihin sinulla on oikeudet\ngit clone ssh://git@repo.kamit.fi:45065/some-namespace/some-repo.git\n</code></pre> <p>Info</p> <p>Jos kloonaus ei pelaa, voit kokeilla lis\u00e4t\u00e4 seuraavanlainen Git Global -konfiguraation (Huomaa nestatut heitto- ja lainasumerkit!):</p> <pre><code>git config --global core.sshCommand \"'C:\\Windows\\System32\\OpenSSH\\ssh.exe'\"\n</code></pre> <p>T\u00e4m\u00e4n ei kuitenkaan pit\u00e4isi olla tarpeen.</p>"},{"location":"kaytto/lfs/","title":"GitLab: LFS","text":"<p>Warning</p> <p>Huomaa, ett\u00e4 t\u00e4m\u00e4 ohje ei GitLab-aloittelijoita varten. Eth\u00e4n l\u00e4het\u00e4 GitLabiin j\u00e4ttitiedostoja ellei jollakin kurssilla se ole suositeltu tapa. T\u00e4m\u00e4 ohje on tarkoitettu niille, jotka ymm\u00e4rt\u00e4v\u00e4t Gitin perusk\u00e4yt\u00f6n ja haluavat laajentaa osaamistaan suurten tiedostojen hallintaan GitLabissa. T\u00e4m\u00e4 voi olla aiheellista esimerkiksi Datasta teko\u00e4lyyn -kurssin projekteissa, joissa k\u00e4sitell\u00e4\u00e4n suuria (mutta ei valtavia) datatiedostoja.</p> <p>Etene vain jos tied\u00e4t, ett\u00e4 sinun kuuluu k\u00e4ytt\u00e4\u00e4 Git LFS:\u00e4\u00e4.</p> <p>Git LFS (Large File Storage) on Gitin laajennus, joka mahdollistaa suurten tiedostojen tallentamisen erilliseen palveluun Git-repositorion ulkopuolelle. T\u00e4m\u00e4 on hy\u00f6dyllist\u00e4, koska Git ei ole optimoitu k\u00e4sittelem\u00e4\u00e4n suuria bin\u00e4\u00e4ritiedostoja tehokkaasti. Lue alta pikaohjeet ja tutustu ihmeess\u00e4 my\u00f6s komennon alkuper\u00e4iseen dokumentaatioon vaikkapa Ubuntu Manpages: git-lfs kautta. </p> <p>Git LFS:\u00e4\u00e4n lis\u00e4tt\u00e4vill\u00e4 tiedostoilla on maksimikoot, jotka kukin Git hosting service m\u00e4\u00e4rittelee itse. Alla olevasta taulukosta n\u00e4et rajoitukset (silt\u00e4 osin kuin ovat tiedossa).</p> <code>repo.kamit.fi</code> <code>gitlab.dclabra.fi</code> Maksimikoko per tiedosto ?? MiB 1 000 MiB Maksimikoko per repositorio ?? MiB 5 000 MiB"},{"location":"kaytto/lfs/#lfs-kayttoonotto","title":"LFS K\u00e4ytt\u00f6\u00f6notto","text":""},{"location":"kaytto/lfs/#asenna-git-lfs","title":"Asenna Git LFS","text":"<p>Git LFS on asennettavissa useilla eri tavoilla riippuen k\u00e4ytt\u00f6j\u00e4rjestelm\u00e4st\u00e4si. Alla on ohjeet yleisimmille alustoille:</p> WindowsmacOSUbuntu <p>Windows-k\u00e4ytt\u00e4jill\u00e4 pit\u00e4isi jo olla t\u00e4m\u00e4 asennettuna, koska:</p> <p>Git LFS is included in the distribution of Git for Windows. Alternatively, you can install a recent version of Git LFS from the Chocolatey package manager.</p> <p>\u2014 gh:git-lfs</p> <p>Jatka siis suoraan seuraavaan vaiheeseen.</p> <p>T\u00e4ss\u00e4 on oletus, ett\u00e4 sinulla on Homebrew asennettuna, koska se neuvottiin aiemmin t\u00e4ss\u00e4 oppaassa. Aja siis seuraava komento:</p> <pre><code>brew install git-lfs\n</code></pre> <p>N\u00e4in simppeli\u00e4 se on macOS:ss\u00e4.</p> <p>Ubuntun omat APT-repositoriot p\u00e4ivittyv\u00e4t hitaasti, joten on suositeltavaa k\u00e4ytt\u00e4\u00e4 virallista Git LFS -pakettien l\u00e4hdett\u00e4, kuten selitetty osoitteessa gh:git-lfs/INSTALLING.md. Tarkista ohje alkuper\u00e4isest\u00e4 l\u00e4hteest\u00e4. T\u00e4ss\u00e4 kuitenkin tiivistetty versio:</p> <pre><code># Add the GPG key and .list file (to /etc/apt/)\ncurl -s https://packagecloud.io/install/repositories/github/git-lfs/script.deb.sh | sudo bash\n\n# Install git-lfs\nsudo apt install git-lfs\n</code></pre>"},{"location":"kaytto/lfs/#aktivoi-git-clientissa","title":"Aktivoi Git-clientissa","text":"<p>Tarkista viel\u00e4 varmuuden vuoksi, ett\u00e4 Git LFS on asennettu:</p> <pre><code># Tarkista asennus (ja versio)\ngit lfs version\n\n# Aktivoi Git LFS\ngit lfs install\n</code></pre> <p>Komento tuostaa <code>Git LFS initialized.</code>-viestin, jos kaikki meni hyvin. Jos pohdit, mihin tuo asentuu, niin kannattaa kurkata tiedostoa <code>~/.gitconfig</code> eli sinun globaalin tason konfiguraatiotiedostoa.</p>"},{"location":"kaytto/lfs/#kaytto","title":"K\u00e4ytt\u00f6","text":""},{"location":"kaytto/lfs/#tiedoston-lisaaminen-lfsaan","title":"Tiedoston lis\u00e4\u00e4minen LFS:\u00e4\u00e4n","text":"<p>Huomaa, ett\u00e4 tiedostoa ei saa lis\u00e4t\u00e4 aiempiin committeihin, vaan LFS pit\u00e4\u00e4 ottaa k\u00e4ytt\u00f6\u00f6n ennen kuin tiedosto lis\u00e4t\u00e4\u00e4n ensimm\u00e4ist\u00e4 kertaa. Jos haluat lis\u00e4t\u00e4 esimerkiksi suuren paketin <code>meaning-of-life.zip</code> LFS:\u00e4\u00e4n, k\u00e4yt\u00e4 seuraavaa komentoa:</p> <pre><code>git lfs track meaning-of-life.zip\n</code></pre> <p>Mit\u00e4 jos...</p> <p>Mit\u00e4 jos olet kuitenkin jo lis\u00e4nnyt tiedoston git-repositorioon ennen LFS:n k\u00e4ytt\u00f6\u00f6nottoa? T\u00e4ll\u00f6in sinun t\u00e4ytyy poistaa tiedosto git-historiasta ja lis\u00e4t\u00e4 se uudelleen LFS:\u00e4\u00e4n. T\u00e4m\u00e4 on monimutkaista ja vaatii <code>git filter-repo</code>-ty\u00f6kalun k\u00e4ytt\u00f6\u00e4. Varaa t\u00e4h\u00e4n aikaa ja tee se siten, ett\u00e4 sinulla on varmuuskopio repositoriostasi, ja kommunikoit tiimin kanssa asiasta, koska t\u00e4m\u00e4 muuttaa git-historiaa. Kaikkien tulee kloonata repositorio uudelleen t\u00e4m\u00e4n j\u00e4lkeen. Aivan kaikkien. \u00c4l\u00e4 siis tee t\u00e4t\u00e4 kevyin perustein.</p> <p>Jos repositorio on verrattain tuore, voi olla helpompaa tuhota koko versionhallinta (<code>rm -rf .git</code>), tuhota GitLabista koko projekti ja aloittaa versionhallinta alusta (<code>git init</code>).</p> <p>T\u00e4m\u00e4 on yksi niist\u00e4 syist\u00e4, miksi <code>git status</code> kannattaa aina tarkistaa ennen <code>git add</code>-komentoa. Jos lis\u00e4\u00e4t pl\u00f6r\u00f6\u00e4 gittiin, k\u00e4rsit my\u00f6hemmin.</p> <p>T\u00c4RKE\u00c4\u00c4! T\u00e4ss\u00e4 v\u00e4liss\u00e4 Git LFS luo projektisi juureen <code>.gitattributes</code>-tiedoston, joka sis\u00e4lt\u00e4\u00e4 tiedostojen m\u00e4\u00e4rittelyyn liittyvi\u00e4 asetuksia \u2013 t\u00e4ss\u00e4 tapauksessa LFS:n asetuksia. T\u00e4m\u00e4 tiedosto pit\u00e4\u00e4 commitoida ja puskata GitLabiin viimeist\u00e4\u00e4n samassa commitissa, jossa lis\u00e4\u00e4t LFS-tiedoston ensimm\u00e4ist\u00e4 kertaa. Turvallisinta on tehd\u00e4 se varmuuden vuoksi heti erillisess\u00e4 commitissa ennen kuin lis\u00e4\u00e4t LFS-tiedoston. K\u00e4yt\u00e4 siis seuraavia komentoja:</p> <pre><code>git add .gitattributes\ngit commit -m \"Activating Git LFS\"\ngit push\n</code></pre> <p>Tiedosto <code>.gitattributes</code> sis\u00e4lt\u00e4\u00e4 yll\u00e4 ajetun komennon osalta rivin:</p> .gitattributes<pre><code>meaning-of-life.zip filter=lfs diff=lfs merge=lfs -text\n</code></pre> <p>T\u00e4m\u00e4n j\u00e4lkeen voit lis\u00e4t\u00e4 kyseisen tiedoston aivan kuin LFS ei olisi k\u00e4yt\u00f6ss\u00e4. Tiedostoa ei lis\u00e4t\u00e4 git objekteihin, vaan Git LFS hoitaa tiedoston tallennuksen ja versioinnin erikseen tavalla, joka on optimoitu suurille tiedostoille.</p> <pre><code>git add meaning-of-life.zip\ngit commit -m \"Add large file to LFS\"\ngit push\n</code></pre> <p></p> <p>Kuva 1: Tiedostossa n\u00e4kyy LFS-tagi GitLabin tiedostolistauksessa.</p> <p>Voit k\u00e4ytt\u00e4\u00e4 my\u00f6s jokerimerkkej\u00e4, kuten <code>*.zip</code>, jos haluat seurata kaikkia ZIP-tiedostoja LFS:ll\u00e4. Tutustu lis\u00e4\u00e4 <code>git lfs track --help</code>-komennolla.</p>"},{"location":"kaytto/lfs/#tiedoston-poisto-lfssta","title":"Tiedoston poisto LFS:st\u00e4","text":"<pre><code># Poista tiedosto siten ett\u00e4 git tiet\u00e4\u00e4 poistosta\ngit rm meaning-of-life.zip\n\n# Poista tiedosto seurannasta\ngit lfs untrack meaning-of-life.zip\n\n# Commit ja push\ngit add .\ngit commit -m \"Meaning of life deleted\"\ngit push\n</code></pre>"},{"location":"kaytto/lfs/#repositorion-kloonaus-lfs-tiedostoineen","title":"Repositorion kloonaus LFS-tiedostoineen","text":"<p>Kun kloonaat repositorion, jossa on LFS-tiedostoja, k\u00e4yt\u00e4 normaalia <code>git clone</code> -komentoa. T\u00e4ss\u00e4 on oletus, ett\u00e4 kyseisell\u00e4 tietokoneella on Git LFS aktivoitu onnistuneesti. Jos ei, repositoriosta kloonautuu vain LFS-tiedostojen \"pointer\"-tiedosto. Tiedosto on valitettavasti oikean niminen, joten se on sin\u00e4ns\u00e4 vaikea tunnistaa. T\u00e4m\u00e4n voi havaita seuraavin tavoin:</p> <ul> <li>Tarkista, onko Git LFS asennettuna ja aktivoituna komennolla <code>git lfs version</code> ja <code>git lfs install</code>.</li> <li>Tarkista tiedoston koko. Jos se on hyvin pieni (esim. 135 tavua), kyseess\u00e4 on todenn\u00e4k\u00f6isesti LFS-pointer-tiedosto.</li> <li> <p>Tarkista tiedoston sis\u00e4lt\u00f6 <code>head -n 3 &lt;tiedosto&gt;</code>-komennolla. Jos n\u00e4et jotain t\u00e4llaista:</p> <pre><code>version https://git-lfs.github.com/spec/v1\noid sha256:hashvaluehere\nsize 123456789\n</code></pre> <p>niin kyseess\u00e4 on LFS-pointer-tiedosto.</p> </li> </ul>"},{"location":"kaytto/ryhmakayttaja/","title":"Gitlab: Ryhm\u00e4k\u00e4yt\u00f6n ohje","text":"<p>Warning</p> <p>Git:n opiskelu ottaa aikansa. On suositeltavaa py\u00f6ritt\u00e4\u00e4 henkil\u00f6kohtaisia repositorioita ensin. Kannattaa aloittaa soolok\u00e4ytt\u00e4j\u00e4n ohjeella esimerkiksi siten, ett\u00e4 kirjoitat oppimisp\u00e4iv\u00e4kirjat Markdown-muodossa ja commitoit muutokset GitLabiin.</p> <p>Jos sinulla ja ryhm\u00e4l\u00e4isill\u00e4si on tarve versionhallita jotakin koodia yhteisesti, tarvitsette:</p> <ul> <li>Repositorion, johon kaikilla on oikeudet.</li> <li>Yhteiset pelis\u00e4\u00e4nn\u00f6t ja k\u00e4yt\u00e4nn\u00f6t.<ul> <li>...joihin lukeutuu se, ett\u00e4 <code>main</code>-branchiin ei pusketa mit\u00e4\u00e4n!</li> <li>Featureita tai bugeja edustavat branchit.</li> <li>Jokaista branchia varten l\u00f6ytyy oma Issue.</li> </ul> </li> <li>K\u00e4rsiv\u00e4llisyytt\u00e4.</li> </ul> <p>Kunhan n\u00e4m\u00e4 ovat kunnossa, niin olette valmiita astumaan ketter\u00e4n ohjelmistonkehityksen ja DevOpsin taikamaailmaan! </p>"},{"location":"kaytto/ryhmakayttaja/#video-ohjeistus","title":"Video-ohjeistus","text":"<p>Alla on videomuotoinen 4-osainen ohje, jossa esitet\u00e4\u00e4n, kuinka kuvitteelliset henkil\u00f6t Jack ja Rose hallitsevat yhteisk\u00e4ytt\u00f6ist\u00e4 repositoriota.</p> <p>Videoissa:</p> <ul> <li> Aloitetaan t\u00e4ysin tyhj\u00e4st\u00e4 repositoriosta</li> <li> Luodaan main branch</li> <li> Luodaan kaksi issueta<ul> <li>Jack ty\u00f6skentelee yhden parissa</li> <li>Rose ty\u00f6skentelee toisen parissa</li> </ul> </li> <li> Jack suorittaa Pull Requestin (Merge Request)</li> <li> Rose yritt\u00e4\u00e4 suorittaa konfliktoivan Pull Requestin</li> <li> Rose korjaa konfliktin<ul> <li>Merge <code>main</code> =&gt; <code>&lt;rosen-branch&gt;</code>.</li> </ul> </li> <li> Rose suorittaa korjatun Pull Requestin.</li> </ul>"},{"location":"kaytto/ryhmakayttaja/#osa-14","title":"Osa 1/4","text":"<p>Video 1: Videossa luodaan Gitlab-projekti, ja sille luodaan projektihakemistot kahden virtuaalik\u00e4ytt\u00e4j\u00e4n (Jack ja Rose) kansioihin.</p>"},{"location":"kaytto/ryhmakayttaja/#osa-24","title":"Osa 2/4","text":"<p>Video 2: Videossa luo kaksi Issueta (yksi Issue ja yksi Bug), ja kummankin n\u00e4iden pohjalta yksi branch.</p>"},{"location":"kaytto/ryhmakayttaja/#osa-34","title":"Osa 3/4","text":"<p>Video 3: Videossa tehd\u00e4\u00e4n bugfix, joka pusketaan Gitlabiin ja siit\u00e4 tehd\u00e4\u00e4n Merge Request (ja merge). T\u00e4m\u00e4 toimii pohjana seuraavan videon konfliktille.</p>"},{"location":"kaytto/ryhmakayttaja/#osa-44","title":"Osa 4/4","text":"<p>Video 4: Videossa luodaan feature commit ja merge request. Merge request vaatii konfliktit ratkaisua.</p>"},{"location":"kaytto/soolokayttaja/","title":"Gitlab: Sooloilijan ohje","text":"<p>T\u00e4m\u00e4n ohjeen tarkoitus on opettaa p\u00e4rj\u00e4\u00e4m\u00e4n tilanteessa, jossa sin\u00e4 olet ainut repositorion k\u00e4ytt\u00e4j\u00e4. Ohje on jaettu seuraaviin osiin, joten voit tutustua siihen osaan, mik\u00e4 on sinulle nyt ajankohtainen:</p> <ol> <li>Jos sill\u00e4 koneella, jonka \u00e4\u00e4rell\u00e4 nyt istut, ei ole viel\u00e4 paikallista kopiota ty\u00f6st\u00e4si, lue Ty\u00f6n aloitus.</li> <li>Jos sinulla on jo paikallinen kopio ty\u00f6st\u00e4si, voit siirty\u00e4 suoraan Ty\u00f6n jatkaminen -osioon.</li> </ol> <p>Warning</p> <p>Sinulla tulee olla ssh-avain tunnistautumista varten valmiina ja lis\u00e4ttyn\u00e4 GitLabiin. Lue t\u00e4m\u00e4n sivuston aiemmat luvut, jotta osaat tehd\u00e4 avaimen ja testata sen toiminnan.</p> <p>Huomaa, ett\u00e4 saatat aloittaa joko tyhj\u00e4st\u00e4 tai olemassa olevasta repositoriosta. T\u00e4m\u00e4 ohje kattaa molemmat tilanteet. Klikkaa tarvittava admonition-ruutu alla auki.</p>"},{"location":"kaytto/soolokayttaja/#tyon-aloitus","title":"Ty\u00f6n aloitus","text":"<p>T\u00e4ss\u00e4 osiossa on kaksi aliotsikkoa: Valmiin repositorion k\u00e4ytt\u00f6 ja Tyhj\u00e4n repositoryn k\u00e4ytt\u00f6. Valitse otsikko sen mukaan, onko sinulla jo olemassa oleva repositorio (kloonaus) vai aloitatko tyhj\u00e4lt\u00e4 pohjalta (repositorion alustus).</p>"},{"location":"kaytto/soolokayttaja/#valmiin-repositorion-kaytto","title":"Valmiin repositorion k\u00e4ytt\u00f6","text":"Olemassa oleva repositorio <p>Ajoittain sinulla on jo olemassa repositorio, jonka olet joko luonut toisella koneella, tai joku muu on luonut sen sinulle. T\u00e4ll\u00f6in sinun tulee kloonata repositorio.</p>"},{"location":"kaytto/soolokayttaja/#kloonaus","title":"Kloonaus","text":"<p>Mik\u00e4li olet luonut ja testannut SSH-avaimen ohjeiden mukaisesti. Kloonaa jokin projekti, johon sinulla on oikeudet. \u00c4l\u00e4 turhaa yrit\u00e4 keksi\u00e4 URL:ia tyhj\u00e4st\u00e4, vaan: </p> <ol> <li>Kirjaudu Git-palveluusi sis\u00e4lle (esim. repo.kamit.fi)</li> <li>Etsi repositorio</li> <li>Klikkaa isoa sinist\u00e4 <code>Clone</code>-n\u00e4pp\u00e4int\u00e4. </li> <li>Kopioi SSH-url leikep\u00f6yd\u00e4lle.</li> </ol> <p>T\u00e4m\u00e4n j\u00e4lkeen voit kloonata kyseisen repositorion. Voit jatkaa siit\u00e4, mihin repositorio j\u00e4i viimeksi.</p> <pre><code>$ git clone ssh://git@repo.kamit.fi:&lt;port&gt;/&lt;namespace&gt;/&lt;project&gt;.git\n</code></pre> <p>Warning</p> <p>Huomaathan, ett\u00e4 URI:n on oltava jatkossa muotoa, joka alkaa <code>ssh://...</code> ! </p> <p>Jos yrit\u00e4t kloonata <code>https</code>-alkuisella URL:lla, git pyrkii kirjautumaan sis\u00e4\u00e4n HTTPS:n eik\u00e4 SSH:n avulla.</p> <p>Repo Kamit k\u00e4ytt\u00e4\u00e4 custom TCP-porttia, joten URL:n osatekij\u00e4t ovat:</p> <pre><code>    user        host\n    \u250c\u2500\u2534\u2500\u2510\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\nssh://git@repo.kamit.fi:&lt;port&gt;/&lt;namespace&gt;/&lt;project&gt;.git\n\u2514\u2500\u252c\u2500\u2500\u2518                        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\nscheme                                  path\n</code></pre>"},{"location":"kaytto/soolokayttaja/#tyhjan-repositoryn-kaytto","title":"Tyhj\u00e4n repositoryn k\u00e4ytt\u00f6","text":"Jos opettaja ei ole antanut sinulle repositorion URL:ia <p>Warning</p> <p>Mik\u00e4li opettaja on antanut sinulle repositorion, jota kuuluu kurssilla k\u00e4ytt\u00e4\u00e4, k\u00e4yt\u00e4 sit\u00e4. Hypp\u00e4\u00e4 suoraan t\u00e4m\u00e4n ohjeen aliotsikkoon \"Tyhj\u00e4n repositoryn t\u00e4ytt\u00f6\". Muussa tapauksessa jatka ohjeen lukemista suoraan t\u00e4m\u00e4n rivin alta.</p> <p>Mik\u00e4li sinun on ohjeistettu tekem\u00e4\u00e4n oma repositorio, noudata t\u00e4t\u00e4 ohjetta.</p> <ol> <li>Mene Projects \u00b7 GitLab (kamit.fi) -sivustolle (Kamitin GitLab)</li> <li>Kirjaudu sis\u00e4\u00e4n Kamit-tunnuksilla.</li> <li>Klikkaa \"New Project\" oikeasta yl\u00e4laidasta.</li> <li>Klikkaa \"Create blank project\".</li> </ol> <p>GitLab kysyy seuraavaksi repositorioon (eli \"projektiin\") liittyvi\u00e4 tietoja. T\u00e4yt\u00e4 seuraavat:</p> <ul> <li>Project name: <code>My Project Name</code></li> <li>Project url: <code>http://repo.kamit.fi</code> + <code>yourusername</code></li> <li>Project slug: <code>my-project-name</code> (T\u00e4m\u00e4 generoituu automaattisesti. \u00c4l\u00e4 koske!)</li> <li>Visibility level: <code>Private</code></li> <li>Project configuration:<ul> <li><code>[ ] Initialize repository with a README</code></li> <li><code>[ ] Enable Static Application Security Testing (SAST)</code></li> </ul> </li> </ul> <p>Eth\u00e4n turhaan luo README-tiedostoa. K\u00e4yt\u00e4 projektille lyhytt\u00e4 ja kuvaavaa nime\u00e4. Yll\u00e4 oleva <code>My Project Name</code> on luonnollisesti vain esimerkki. Voit lis\u00e4t\u00e4 sen my\u00f6hemmin itse. Kun yll\u00e4 olevat asetukset on laitettu.</p> Jos opettaja on antanut sinulle repositorion URL:n <p>Kun opettaja (tai sin\u00e4 itse) on luonut tyhj\u00e4n repositorion, selain ohjautuu sivulle, joka edustaa repositoryn http-n\u00e4kym\u00e4\u00e4. Sen osoite on muotoa <code>https://repo.kamit.fi/xxxxxxx/my-project-name</code>. Ruudullasi pit\u00e4isi n\u00e4ky\u00e4 alla olevan kuvan mukainen ohjeteksti. <code>xxxxxxx</code>:n tilalla lukee sinun GitLab-k\u00e4ytt\u00e4j\u00e4tunnus.</p> <p></p> <p>Kuvio 1: GitLab, kuten my\u00f6s muut vastaavat palvelut, antaa ohjetekstin mik\u00e4li repositorio on tyhj\u00e4.</p> <p>Noudatamme ohjeteksti\u00e4. Avaa Git Bash ja navigoi oikeaan kansioon. Alla on pikaohjeet Git Bashiss\u00e4 hakemistoissa navigoimiseen. Risuaidalla (<code>#</code>) alkavat rivit ovat kommentteja. Niit\u00e4 ei kuulu ajaa. Rivit alkavat dollarimerkill\u00e4 (<code>$</code>). Se ei ole osa komentoa vaan indikoi rivin alkua. Muut rivit esitt\u00e4v\u00e4t tulostetta. Lue esimerkki huolella rivi rivilt\u00e4!</p> <p>KOODIN LYHENTEET JA SYMBOLIT: Alla <code>username</code> viittaa sinun Windows-k\u00e4ytt\u00e4j\u00e4tunnukseen. <code>xxxxxxx</code> viittaa sinun GitLab-k\u00e4ytt\u00e4j\u00e4tunnukseen. Sen n\u00e4kee GitLabin tarjoamasta repositoryn osoitteesta. Aaltoviiva (<code>~</code>) on Bashiss\u00e4 merkki, joka tarkoittaa kotikansiotasi (esim. <code>/c/Users/username</code>).</p> <pre><code># Tarkista, miss\u00e4 kansiossa olet.\n$ pwd\n/c/Users/username\n\n# Luo kansio projektitiedostoja varten\n# HUOM! Korvaa xxxxxxx sinun GitLab-k\u00e4ytt\u00e4j\u00e4tunnuksellasi!\n$ mkdir -p ~/Code/xxxxxxx/\n\n# Vaihda kansioon\n$ cd ~/code/xxxxxxx/\n\n# Tarkista, miss\u00e4 kansiossa olet nyt.\n$ pwd\n/c/Users/username/code/xxxxxxx\n</code></pre> <p>T\u00e4ss\u00e4 vaiheessa sinun Git Bash -terminaalin ty\u00f6kansio on GitLab-k\u00e4ytt\u00e4j\u00e4\u00e4si varten tekem\u00e4si hakemisto (<code>~/</code>). Voit aloittaa GitLabin tarjoamien koodien ajamisen yksi kerrallaan. Valitse yksi rivi koodia selaimessa (esim. Edge tai Chrome), paina <code>CTRL + C</code> tai valitse oikealla hiirenkorvalla Copy. Liit\u00e4 rivi Git Bashiin oikealla hiirenkorvalla ja painamalla Paste, tai pikan\u00e4pp\u00e4imell\u00e4 <code>SHIFT + Ins(ert)</code>.</p> <p>Kun olet joko kloonannut olemassa olevan repositorion tai luonut uuden, voit jatkaa alla olevan ohjeen seuraamista. Jatkossa sinua auttaa Amazing Game Loop, jota orjallisesti noudattaen v\u00e4lt\u00e4t konfliktit ja muut ongelmat.</p>"},{"location":"kaytto/soolokayttaja/#tyon-jatkaminen","title":"Ty\u00f6n jatkaminen","text":""},{"location":"kaytto/soolokayttaja/#git-amazing-game-loop","title":"Git: Amazing Game Loop","text":"<p>T\u00e4m\u00e4n osion voisi tiivist\u00e4\u00e4 yhteen ohjeeseen:</p> <p></p> <p>Kuvio 2: Gemini Pro:n (Nano Banana) n\u00e4kemys 2000 vuotta ennen ajanlaskua luodusta viisaudesta.</p> <p>Jos t\u00e4t\u00e4 viisautta hieman avaa, niin jatkossa voit seurata looppia, jossa toistat aina samoja vaiheita. T\u00e4m\u00e4 on kuvattuna alla olevassa kuvaajassa. Huomaathan, ett\u00e4 ohjetta tulee noudattaa t\u00e4sm\u00e4llisesti. Mik\u00e4li j\u00e4t\u00e4t vaiheita tekem\u00e4tt\u00e4, tai teet joitakin hatusta keksittyj\u00e4 vaiheita, voit joutua tilanteeseen jossa GitLabin n\u00e4kemys repositoriosta (<code>origin/main</code>) ja sinun lokaali n\u00e4kemys repositoriosta (<code>main</code>) eroavat. Kun n\u00e4m\u00e4 <code>git pull</code> ja <code>git push</code> v\u00e4liss\u00e4 olevat vaiheet avaa, ne ovat seuraavan koodisnippetin kaltaiset:</p> <pre><code># Aloita uusi ty\u00f6skentelysessio\n$ git pull\n\n#####################################\n# TEE MUUTOKSIA T\u00c4SS\u00c4 V\u00c4LISS\u00c4       #\n# VALITSEMALLASI TEKSTIEDITORILLA   #\n#####################################\n\n# Varmista, ett\u00e4 status listaa haluamasi muutokset \n$ git status -u\n\n# Lis\u00e4\u00e4 kaikki muutokset indeksiin\n$ git add .\n\n# Tee muutoksista commit\n$ git commit -m \"A short comment that describes the changes that were made.\"\n\n# Puske commit origin/main eli GitLab\n$ git push\n\n#########################\n# PALAA TAKAISIN ALKUUN #\n#########################\n</code></pre>"},{"location":"kaytto/soolokayttaja/#git-when-conflict-strikes-back","title":"Git: When Conflict Strikes Back","text":"<p>Konfliktit ovat mahdollisia vain jos et noudata ohjetta. Konflikteja voi synty\u00e4 erityisesti silloin jos ty\u00f6skentelet vuoroparein kahdella tai useammalla eri tietokoneella, jolloin sinulla voi olla sama repositorio eri paikoissa eri ajassa \u2013 jos et siis ole noudattanut ohjetta. Tunnistat t\u00e4m\u00e4n tilanteen siit\u00e4, ett\u00e4 <code>git push</code> palauttaa jotakuinkin seuraavan:</p> <p></p> <p>Kuvio 3: Virheilmoitus, joka ilmenee, jos <code>git push</code> ep\u00e4onnistuu.</p> <p>T\u00e4m\u00e4 johtuu todenn\u00e4k\u00f6isemmin siit\u00e4, ett\u00e4 et ole aloittanut tuoretta p\u00e4iv\u00e4\u00e4 <code>git pull</code>-komennolla. Jos n\u00e4in p\u00e4\u00e4see k\u00e4ym\u00e4\u00e4n, \u00c4L\u00c4 PANIKOI. Alla on upotettuna video, jossa t\u00e4m\u00e4 ongelma ratkaistaan seuraavin vaihein:</p>"},{"location":"kaytto/soolokayttaja/#vaiheet-eri-tiedostot","title":"Vaiheet: Eri tiedostot","text":"<ul> <li> Aloitetaan repositoriosta, jossa on pelkk\u00e4 <code>my_favorite_colors.md</code> -tiedosto.</li> <li> Ty\u00f6skennell\u00e4\u00e4n koneella SCHOOL \ud83c\udfeb.<ul> <li>Luodaan uusi tiedosto: <code>koulussa-luotu.txt</code>.</li> <li>Add + Commit + Push</li> </ul> </li> <li> Siirryt\u00e4\u00e4n koneelle HOME \ud83c\udfe1.<ul> <li>Unohdetaan tehd\u00e4 <code>git pull</code></li> <li>Muokataan <code>my_favorite_colors.md</code>-tiedostoa (johon SCHOOL \ud83c\udfeb -koneella ei kajottu).</li> <li>Add + Commit + Push \u2192 tulee varoitus</li> <li>Korjataan tilanne: <code>git pull</code> (tai <code>git pull --no-ff</code> jos <code>pull.ff=only</code>)</li> <li>Git ratkaisee tilanteen. Ongelma on koneelle helppo, koska tiedostot ovat eri.</li> <li>Push onnistuu</li> </ul> </li> </ul>"},{"location":"kaytto/soolokayttaja/#vaiheet-paallekkaiset-muutokset","title":"Vaiheet: P\u00e4\u00e4llekk\u00e4iset muutokset","text":"<ul> <li> Ty\u00f6skennell\u00e4\u00e4n koneella SCHOOL \ud83c\udfeb.<ul> <li>Muokataan tiedostoa <code>my_favorite_colors.md</code></li> <li>Add + Commit + Push</li> </ul> </li> <li> Siirryt\u00e4\u00e4n koneelle HOME \ud83c\udfe1.<ul> <li>Unohdetaan tehd\u00e4 <code>git pull</code></li> <li>Muokataan samaa tiedostoa <code>my_favorite_colors.md</code></li> <li>Commit + Push \u2192 tulee konfliktivaroitus</li> <li>Korjataan tilanne: <code>git pull [--no-ff]</code></li> <li>Avataan VS Coden 3-way merge editor<ul> <li>Painetaan Resolve in Merge Editor</li> <li>Valitaan halutut muutokset</li> <li>Merkit\u00e4\u00e4n tiedosto ratkaistuksi</li> <li>(Toistetaan kunnes konfliktit count n\u00e4ytt\u00e4\u00e4 0.)</li> </ul> </li> <li>Suoritetaan uusi Commit</li> <li>Push onnistuu</li> </ul> </li> </ul>"},{"location":"kaytto/soolokayttaja/#vaiheet-videona","title":"Vaiheet videona","text":"<p>Video 1: Yll\u00e4 listatut vaiheet video-oppaan muodossa.</p>"},{"location":"kaytto/soolokayttaja/#taman-ohjeen-rajoitteet","title":"T\u00e4m\u00e4n ohjeen rajoitteet","text":"<p>Korostan viel\u00e4, ett\u00e4 t\u00e4m\u00e4 ohje on p\u00e4tev\u00e4 vain siin\u00e4 (harvinaisen) yksinkertaisessa tilanteessa, ett\u00e4 sin\u00e4 olet ainut henkil\u00f6 joka puskee muutoksia repoon. T\u00e4m\u00e4 ei toimi ryhm\u00e4t\u00f6iden kanssa. K\u00e4yt\u00e4 brancheja, jos tekij\u00f6it\u00e4 on enemm\u00e4n kuin yksi. Ryhm\u00e4ty\u00f6ss\u00e4 konflikteilta ei useimmiten voi v\u00e4ltty\u00e4, mutta branchien k\u00e4ytt\u00f6 helpottaa niiden ratkaisua. Yksin ty\u00f6skennelless\u00e4 branchit ovat makuasia - ellei jokin kurssiteht\u00e4v\u00e4 vaadi branchien k\u00e4ytt\u00f6\u00e4. T\u00e4h\u00e4n on erillinen ohje: GitLab: Ryhm\u00e4k\u00e4yt\u00f6n ohje</p>"},{"location":"kaytto/yleista/","title":"Yleist\u00e4","text":"<p>T\u00e4m\u00e4 luku sis\u00e4lt\u00e4\u00e4 muutaman nyrkkis\u00e4\u00e4nn\u00f6n gitin k\u00e4yt\u00f6st\u00e4, jotka on hyv\u00e4 pit\u00e4\u00e4 mieless\u00e4.</p>"},{"location":"kaytto/yleista/#dokumentoi-kaikki-mita-teet","title":"Dokumentoi kaikki mit\u00e4 teet (\u270d\ufe0f)","text":"<p>Tee <code>README.md</code> ja <code>LICENSE</code> ja lis\u00e4ksi tarpeen mukaan jokin wiki/blogi/saitti/muu. Selit\u00e4, miksi projekti on olemassa, kuinka sen voi asentaa, kuinka sit\u00e4 voi ajaa, mit\u00e4 tekij\u00e4noikeuksia/lisenssej\u00e4 siihen liittyy ja niin edelleen. Mik\u00e4li ty\u00f6skentelet jonkin uuden teknologian kanssa, on suositeltavaa luoda jopa <code>MEMO.md</code>, johon tallennat historian tekemisest\u00e4 vaiheista. T\u00e4m\u00e4 auttaa my\u00f6hemm\u00e4ss\u00e4 k\u00e4ytt\u00f6\u00f6nottovaiheessa tai vianselvityksess\u00e4 merkitt\u00e4v\u00e4sti.</p> <p>Tip</p> <p>Mikset k\u00e4ytt\u00e4isi Github Pages -ty\u00f6kalua tehd\u00e4ksesi itsellesi portfolio-tyylisen sivuston, jota voit k\u00e4ytt\u00e4\u00e4 esimerkiksi ty\u00f6nhaussa? T\u00e4m\u00e4 sivu, jota luet nyt, on tehty Github Pagesilla. Koodi l\u00f6ytyy gh:sourander/how-to-git -repositoriosta. Sivusto p\u00e4ivittyy automaattisesti uuden pushin my\u00f6t\u00e4 (ks <code>.github/workflows/*.yml</code>).</p>"},{"location":"kaytto/yleista/#ala-laita-suuria-binaaritiedostoja-gittiin","title":"\u00c4l\u00e4 laita suuria bin\u00e4\u00e4ritiedostoja gittiin (\ud83d\udcbe)","text":"<p>Tutustu <code>.gitignore</code>-tiedostoon. Kyseess\u00e4 on projektin juuressa, eli siis samassa hakemistossa miss\u00e4 on <code>.git/</code>-hakemisto, sijaitseva git-projektin konfiguraatiotiedosto. Tiedostossa listatut tiedostot ja hakemistot j\u00e4tet\u00e4\u00e4n huomiotta gitin toimesta. T\u00e4m\u00e4 tarkoittaa, ett\u00e4 ne eiv\u00e4t n\u00e4y <code>git status</code>-komennon tulosteessa, niit\u00e4 ei voi lis\u00e4t\u00e4 <code>git add</code>-komennolla eik\u00e4 niit\u00e4 l\u00e4hetet\u00e4 et\u00e4repositorioon <code>git push</code>-komennolla. On luontevaa, ett\u00e4 tiedostoon lis\u00e4t\u00e4\u00e4n esimerkiksi seuraavat kohteet:</p> <ul> <li><code>build/</code>-hakemisto, jos ohjelmasi tuottaa bin\u00e4\u00e4ritiedostoja k\u00e4\u00e4nn\u00f6svaiheessa</li> <li><code>data/</code>-hakemisto, jos ohjelmasi k\u00e4sittelee suuria datatiedostoja, joita ei ole tarkoitus versionhallita</li> <li><code>*.log</code>, <code>*.tmp</code> ja muut v\u00e4liaikaiset tiedostot, joita ohjelmasi tuottaa ajon aikana</li> </ul> <p>Githubin gh:github/gitignore reposta l\u00f6ytyy useille eri kielille esimerkkej\u00e4, joista voi katsoa esimerkkej\u00e4. Kenties parempi k\u00e4yt\u00e4nt\u00f6 on kuitenkin ajaa <code>git status -u</code> aina ennen <code>git add .</code> -komentoa ja tarkistaa, ett\u00e4 mit\u00e4\u00e4n ylim\u00e4\u00e4r\u00e4ist\u00e4 ei ole tulossa mukaan. Jos on, muokkaa <code>.gitignore</code>-tiedostoa ja tarkista <code>git status -u</code> uudelleen, kunnes pl\u00f6r\u00f6 on poissa.</p>"},{"location":"kaytto/yleista/#jos-kuitenkin-laitat-binaaritiedostoja-gittiin","title":"... jos kuitenkin laitat bin\u00e4\u00e4ritiedostoja gittiin (\ud83d\udcbe)","text":"<p>Joskus gitti osoittautuu ainoaksi sopivaksi tietyille tiedostoille, kuten dokumentaatioon tai testaamiseen liittyville tiedostoille. Opetusk\u00e4yt\u00f6ss\u00e4 GitLabiin voi sijoittaa my\u00f6s koneoppimismallin koulutukseen k\u00e4ytetty\u00e4 dataa \u2013 ainakin j\u00e4rjellisiss\u00e4 m\u00e4\u00e4rin. T\u00e4ll\u00f6in on hyv\u00e4 arvioida seuraavat vaihtoehdot:</p> <ul> <li>Jos tiedostoja on useita kymmeni\u00e4 gigatavuja, sijoita ne muualle, kuten AWS S3:een tai Azure Blob Storageen, ja luo skripti, joka lataa datan tarvittaessa paikalliseksi.</li> <li>Jos tiedostojen koko on maksimissaan pari gigaa, k\u00e4yt\u00e4 Git LFS:\u00e4\u00e4 (Large File Storage), joka on suunniteltu erityisesti suurten tiedostojen hallintaan git-repositorioissa, ja meid\u00e4n DC-labran GitLab tukee t\u00e4t\u00e4 ominaisuutta. T\u00e4h\u00e4n l\u00f6ytyy helppo ohje GitLab: Git LFS-luvusta.</li> </ul> <p>Jos olet ep\u00e4varma, kysy kurssin opettajalta.</p>"},{"location":"kaytto/yleista/#ymmarra-ala-muista","title":"Ymm\u00e4rr\u00e4, \u00e4l\u00e4 muista (\ud83e\udde0)","text":"<p>Eth\u00e4n aja git-komentoja <code>hauki on kala hauki on kala</code>-metodilla ulkoa muistellen, ymm\u00e4rt\u00e4m\u00e4tt\u00e4 mit\u00e4 ne tekev\u00e4t. Gitin k\u00e4ytt\u00f6 on hyvin dokumentoituna Githubin, Gitlabin ja muiden palveluiden sivuilla sek\u00e4 ilmaisessa Pro Git -kirjassa sek\u00e4 t\u00e4ll\u00e4 sivustolla. K\u00e4yt\u00e4 ohjeita hyv\u00e4ksesi; lue niit\u00e4 ajatuksella. Kun ymm\u00e4rr\u00e4t, muistitaakka v\u00e4henee.</p>"},{"location":"kaytto/yleista/#tarkista-muutokset-ennen-committia","title":"Tarkista muutokset ennen committia. (\ud83d\udd0d)","text":"<p>Eth\u00e4n koskaan aja komentoja <code>git add .</code> ja <code>git commit -m \"jotain\"</code> tarkistamatta, mihin tiedostoihin olet koskenut ja mill\u00e4 tavalla. Aluksi on hyv\u00e4 tapa k\u00e4ytt\u00e4\u00e4 lokaalia testausta ennen <code>git push</code>-komentoa. </p> <p>Note</p> <p>My\u00f6hemmin opit k\u00e4ytt\u00e4m\u00e4\u00e4n CI/CD-palveluita, jotka testaavat koodisi automaattisesti ennen kuin se p\u00e4\u00e4tyy muiden k\u00e4ytt\u00f6\u00f6n - t\u00e4st\u00e4 ei kannata murehtia aloittelijena.</p>"},{"location":"kaytto/yleista/#kirjoita-merkityksellisia-commit-viesteja","title":"Kirjoita merkityksellisi\u00e4 commit-viestej\u00e4 (\ud83d\udcd6)","text":"<p>Commit edustaa muutosta koodissa, dokumentaatiossa tai muussa projektisi sis\u00e4ll\u00f6ss\u00e4. Commitin viestin tulisi kuvastaa, mik\u00e4 on muuttunut. </p> <p>\u274c <code>Added some code lol</code></p> <p>\u2705 <code>Added Save As funtionality to editor</code></p>"},{"location":"kaytto/yleista/#tyoskentele-pienissa-inkrementeissa","title":"Ty\u00f6skentele pieniss\u00e4 inkrementeiss\u00e4 (\ud83d\udd28)","text":"<p>Jos sinulle tulee fiilis, ett\u00e4 commit message on proosaa, joka sis\u00e4lt\u00e4\u00e4 <code>...after which I ...</code>, ja <code>..and also...</code>, ja <code>...including but not limited to...</code>, ja <code>...and as a final step I refactored all code</code>, niin todenn\u00e4k\u00f6isesti ty\u00f6skentelet aivan liian suurissa paloissa. Hyv\u00e4 git game loop on seuraava:</p> <ul> <li>Tee pieni muutos kerrallaan.</li> <li>Testaa se.</li> <li>Stage, Commit &amp; Push.</li> <li>Repeat.</li> </ul>"},{"location":"kaytto/yleista/#fetch-tai-pull","title":"Fetch tai Pull (\ud83d\udd01)","text":"<p>Jos et ty\u00f6skentele yksin projektin parissa, vaan joku muu tiimin j\u00e4sen voi lis\u00e4t\u00e4/muokata saman branchin sis\u00e4lt\u00f6\u00e4, hy\u00f6dynn\u00e4 mieluiten brancheja - tai aja git pull aina ennen pushia. Branchien k\u00e4ytt\u00f6 on neuvottu GitLab: Ryhm\u00e4k\u00e4yt\u00f6n ohje-luvussa.</p> <p>Mik\u00e4li ty\u00f6skentelet yksin, aloita p\u00e4iv\u00e4 <code>git pull</code>:lla ja lopeta <code>git push</code>:iin. T\u00e4m\u00e4 on neuvottu Gitlab: Sooloilihan ohje-luvussa.</p>"},{"location":"kaytto/yleista/#dont-panic","title":"Don't panic (\ud83e\uddd8)","text":"<p>Jos saat virheilmoituksen tai git avaa jotakin sinulle vierasta, kuten <code>vim</code>-tekstieditorin, \u00e4l\u00e4 h\u00e4tik\u00f6i ja copy-pastea jokaista StackOverFlow:sta l\u00f6yt\u00e4m\u00e4\u00e4si koodirimpsua. Hengit\u00e4 rauhassa, lue mahdolliset virheilmoitukset l\u00e4pi huolella ja kysy tarpeen mukaan apua muilta.</p> <p>Tip</p> <p>Huomaa, ett\u00e4 saat tarkempia virheilmoituksia <code>verbose</code>-flagilla. Esimerkiksi <code>git pull --verbose</code> tai <code>git push -v</code>.</p>"},{"location":"tunnistautuminen/lueminut/","title":"Lueminut","text":"<p>Tyypillisesti Git-palveluihin (GitLab, Github, Bitbucket jne.) voi tunnistautua nelj\u00e4ll\u00e4 eri tavalla:</p> <ul> <li>K\u00e4ytt\u00e4j\u00e4tunnuksella ja salasanalla<ul> <li>T\u00e4t\u00e4 k\u00e4ytet\u00e4\u00e4n useimmiten kun palveluun kirjaudutaan verkkoselaimella.</li> <li><code>git</code>-komentojen kanssa t\u00e4m\u00e4 ei ole suositeltua, ja osa palveluntarjoajista on est\u00e4nyt jopa koko tavan.</li> </ul> </li> <li>Token<ul> <li>Token ei pelk\u00e4st\u00e4\u00e4n tunnistaudu vaan my\u00f6s autorisoituu.</li> <li>... eli token sis\u00e4lt\u00e4\u00e4 sek\u00e4 henkil\u00f6llisyyden ett\u00e4 jonkin k\u00e4ytt\u00f6oikeuksien paletin, joka tunnetaan nimell\u00e4 scope. </li> <li><code>git</code>-komentojen kanssa t\u00e4t\u00e4 voi k\u00e4ytt\u00e4\u00e4, ja onkin suositeltu tapa esimerkiksi automatisaatiossa. Mik\u00e4li token vuotaa, sill\u00e4 voi tehd\u00e4 vain scopen suhteen rajatut actionit, ja tokenin p\u00e4\u00e4sy on helppo peruuttaa (eng. revoke).</li> </ul> </li> <li>SSH-avainpari<ul> <li>SSH on suositeltu tunnistautumisen tapa perusk\u00e4yt\u00f6ss\u00e4.</li> <li>Toisin kuin yll\u00e4 olevissa metodeissa, varsinaista salasanaa/tokenia ei koskaan l\u00e4hetet\u00e4 verkon yli palvelimelle. T\u00e4m\u00e4n mahdollistaa asymmetrinen salaus.</li> </ul> </li> <li>Oauth<ul> <li>T\u00e4h\u00e4n soveltuu projekti nimelt\u00e4\u00e4n Git Credential Manager. Se asentuu Git for Windowsin mukana, mutta muissa k\u00e4ytt\u00f6j\u00e4rjestelmiss\u00e4 se vaatii hieman ty\u00f6t\u00e4 ja huolenpitoa.</li> </ul> </li> </ul> <p>Mik\u00e4li olet ep\u00e4varma, k\u00e4yt\u00e4 ssh:ta (tai https:\u00e4\u00e4). Mik\u00e4li olet edistyneempi k\u00e4ytt\u00e4j\u00e4, voit harkiten k\u00e4ytt\u00e4\u00e4 tokeneita sille sopivissa k\u00e4ytt\u00f6tapauksissa.</p>"},{"location":"tunnistautuminen/https/yleist%C3%A4/","title":"Yleist\u00e4","text":"<p>T\u00e4ss\u00e4 materiaalissa ohjeistetaan toistaiseksi vain SSH-tunnistautuminen. T\u00e4m\u00e4 kansio on placeholder mahdollista tulevaisuuden k\u00e4ytt\u00f6\u00e4 varten. Kun kloonaat repositoriota, varmistathan, ett\u00e4 valitset <code>Clone</code>-nappulan alta SSH:n.</p> <p>Warning</p> <p>Eth\u00e4n k\u00e4yt\u00e4 HTTPS:\u00e4\u00e4 on-prem Gitlabin kanssa (eli repo.kamit.fi). Se ei tue Git Credential Manager Corea, joten joudut sy\u00f6tt\u00e4m\u00e4\u00e4n k\u00e4ytt\u00e4j\u00e4tunnuksen ja salasanan. T\u00e4m\u00e4 on turvallisuusriski. K\u00e4yt\u00e4 SSH:t\u00e4.</p> <p>Mik\u00e4li k\u00e4yt\u00e4t HTTPS:\u00e4\u00e4 esimerkiksi Gitlab Cloudin tai Githubin kanssa, kannattaa varmistaa ett\u00e4 sinulla on Git Credential Manager asennettuna. T\u00e4m\u00e4n asennus riippuu k\u00e4ytt\u00f6j\u00e4rjestelm\u00e4st\u00e4. Lue lis\u00e4\u00e4 Git Tools - Credential Storage tai Git Credential Manager reposta.</p>"},{"location":"tunnistautuminen/ssh/ssh/","title":"Avaimen luonti","text":""},{"location":"tunnistautuminen/ssh/ssh/#luo-avain","title":"Luo avain","text":"<p>Warning</p> <p>Ennen kuin aloitat ohjeen seuraamisen, varmista, onko sinulla jo avain olemassa <code>~/.ssh/</code> hakemistossa. Jos sinulla on jo avain, \u00e4l\u00e4 luo uutta, vaan k\u00e4yt\u00e4 sit\u00e4. Jos et tied\u00e4, onko sinulla avainta, voit tarkistaa sen komennolla <code>ls ~/.ssh/</code>. Jos tiedostoja tai koko hakemistoa ei ole, voit jatkaa ohjeen seuraamista. Muutoin hypp\u00e4\u00e4 kohtaan Lis\u00e4\u00e4 avain Git-palveluun.</p> <p>Aloitetaan luomalla SSH-avain. Alla oleva komento toimii sek\u00e4 Git Bashiss\u00e4 ett\u00e4 macOS:n terminaalissa (zsh):</p> <pre><code>ssh-keygen -t ed25519 -C \"jokin kommentti\"\n</code></pre> <p>Suositeltu kommentti on muotoa <code>etunimi.sukunimi@kamk.fi kotikone</code>. T\u00e4m\u00e4 tarkoittaa, ett\u00e4 luot yhden ssh-avainparin per tietokone, jolla k\u00e4yt\u00e4t gitti\u00e4. Mik\u00e4li luot virtuaalikoneen, luo sille oma avain. Mik\u00e4li ostat uuden koneen, luo sille oma avain.</p> <p>Eth\u00e4n muokkaa tiedoston nime\u00e4 kun <code>ssh-keygen</code> sit\u00e4 kysyy, ellet tied\u00e4 mit\u00e4 olet tekem\u00e4ss\u00e4. Paina Enter kun tiedostonime\u00e4 kysyt\u00e4\u00e4n. Kun hyv\u00e4ksyt komennon ehdottaman tiedostonimen, se luo kaksi tiedostoa hakemistoon: <code>~/.ssh/</code>. Aaltosulje viittaa k\u00e4ytt\u00e4j\u00e4n kotihakemistoon.</p> <ul> <li>Julkinen avain: <code>id_ed25519.pub</code></li> <li>Yksityinen avain: <code>id_ed25519</code></li> </ul> <p>Tip</p> <p>Tiedostolle on kannattavaa antaa passphrase, jota ilman tiedosto on k\u00e4ytt\u00f6kelvoton, varsinkin jos k\u00e4yt\u00e4t yhteisess\u00e4 k\u00e4yt\u00f6ss\u00e4 olevaa tietokonetta. T\u00e4m\u00e4 vaikeuttaa v\u00e4\u00e4riin k\u00e4siin joutuneen avaimen k\u00e4ytt\u00f6\u00e4 merkitt\u00e4v\u00e4sti. Yll\u00e4 oleva komento kysyy sit\u00e4; anna tai ole antamatta.</p>"},{"location":"tunnistautuminen/ssh/ssh/#lisaa-avain-git-palveluun","title":"Lis\u00e4\u00e4 avain Git-palveluun","text":""},{"location":"tunnistautuminen/ssh/ssh/#vaihe-1-kopioi-leikepoydalle","title":"Vaihe 1: Kopioi leikep\u00f6yd\u00e4lle","text":"<p>Alla ohjeet julkisen avaimen kopioimiseksi leikep\u00f6yd\u00e4lle. K\u00e4y liitt\u00e4m\u00e4ss\u00e4 se valitsemasi palvelun portaalissa.</p> Windows (Git Bash)macOS (Zsh)Ubuntu (Bash) <pre><code>$ cat ~/.ssh/id_ed25519.pub | clip\n</code></pre> <pre><code>$ cat ~/.ssh/id_ed25519.pub | pbcopy\n</code></pre> <pre><code># Asenna ensin xclip jos ei l\u00f6ydy jo\n$ sudo apt update &amp;&amp; sudo apt install xclip -y\n$ xclip -sel clip &lt; ~/.ssh/id_ed25519.pub\n</code></pre>"},{"location":"tunnistautuminen/ssh/ssh/#vaihe-2-lisaa-palveluun","title":"Vaihe 2: Lis\u00e4\u00e4 palveluun","text":"<p>Se, minne julkinen avain git-palvelussa lis\u00e4t\u00e4\u00e4n tarkalleen, riippuu palvelusta. Lue palvelun omat ohjeet. N\u00e4it\u00e4 ovat Gitlab: Add an SSH key to your GitLab account sek\u00e4 Github: Adding a new SSH key to your GitHub account. Jos k\u00e4yt\u00e4t jotakin muuta palvelua kuin Github tai GitLab, lue kyseisen palvelun ohjeet.</p> <p>TL;DR</p> <p>Pikaohje GitLabiin on t\u00e4ss\u00e4: <code>Preferences</code> =&gt; <code>SSH Keys</code> =&gt; <code>Add new key</code> =&gt; Ctrl+V kentt\u00e4\u00e4n <code>Key</code>.</p>"},{"location":"tunnistautuminen/ssh/ssh/#vaihe-3-testaa-avain","title":"Vaihe 3: Testaa avain","text":"<p>Kun olet lis\u00e4nnyt avaimen k\u00e4ytt\u00e4m\u00e4si palvelun portaaliin, on hyv\u00e4 varmistaa, ett\u00e4 voit tunnistautua palveluun <code>SSH</code>:lla. Avainta k\u00e4ytet\u00e4\u00e4n jatkossa kaikkiin palveluihin kirjauduttuessa, mik\u00e4li se on ainut l\u00f6ytyv\u00e4 ssh-avain. Avainta voi testata <code>repo.kamit.fi</code>-palvelun osalta n\u00e4in:</p> repo.kamit.figitlab.dclabra.fiGithub <pre><code>#         \u250c\u2500 T\u00e4ss\u00e4 pit\u00e4\u00e4 lukea SSH eik\u00e4 HTTPS!!\n#         \u2502\n#        \u250c\u2534\u2510\n$ ssh -T ssh://git@repo.kamit.fi:45065\n</code></pre> <pre><code>$ ssh -T git@gitlab.dclabra.fi\n</code></pre> <pre><code>$ ssh -T git@github.com\n</code></pre> <p>Mik\u00e4li palvelu kysyy salasanaa (ei siis <code>passphrasea</code> vaan <code>password</code>:ia), ssh-avain ei ole syyst\u00e4 tai toisesta k\u00e4yt\u00f6ss\u00e4. Peruuta kirjautuminen painamalla Ctrl+C. Kokeile sulkea ja avata Git Bash terminaali uusiksi. Mik\u00e4li t\u00e4m\u00e4k\u00e4\u00e4n ei auta, aloita vianselvitys. Jos ei ratkea j\u00e4rjellisess\u00e4 ajassa, pyyd\u00e4 apua kanssaopiskelijoilta tai opettajalta.</p> <p>Vianselvityksen aloitus</p> <p>Tarkempaan vianselvitykseen voit ajaa yll\u00e4 n\u00e4kyv\u00e4n ssh-komennon, mutta vaihda optioksi <code>-Tvvv</code>, jotta se tulostaa kaiken mahdollisen lokitukseen menev\u00e4n rividatan. Lue se l\u00e4pi huolella ja ala etsi\u00e4 vikaa.</p> Mik\u00e4 on fingerprint? <p>Kun k\u00e4yt\u00e4t avainta ensimm\u00e4isen kerran, ssh client pyyt\u00e4\u00e4 sinua varmistamaan, ett\u00e4 palvelimen fingerprint on oikein.</p> <pre><code>Cloning into 'test'...\nThe authenticity of host '[repo.kamit.fi]:45065 ([212.116.36.9]:45065)' can't be established.\nED25519 key fingerprint is SHA256:cL3YVM/KHB14av6S6YfY+ZnEH9tiaOhIQxfd3WUizNE.\nThis key is not known by any other names\nAre you sure you want to continue connecting (yes/no/[fingerprint])?\n</code></pre> <p>Mik\u00e4li kirjoitat <code>yes</code> ja painat enteri\u00e4, niin kyseist\u00e4 hostia varten lis\u00e4t\u00e4\u00e4n rivit tiedostoon <code>.ssh/known_hosts</code>. Mik\u00e4li poistat tuon tiedoston, varmistus tehd\u00e4\u00e4n seuraavan git-operaation kohdalla uusiksi.</p> <p>Kun olet luonut ja testannut avaimen (<code>ssh -T &lt;url&gt;</code>-komennolla), voit alkaa k\u00e4ytt\u00e4\u00e4 gitti\u00e4 kyseisen git servicen kanssa. Voit jatkaa esimerkiksi Soolok\u00e4ytt\u00e4j\u00e4n ohjeeseen.</p>"},{"location":"tunnistautuminen/ssh/useampi-avain/","title":"Useampi avain (Advanced)","text":"<p>Warning</p> <p>Huomaa, ett\u00e4 t\u00e4m\u00e4 on edistyneille k\u00e4ytt\u00e4jille. Mik\u00e4li et ole varma, tarvitsetko t\u00e4t\u00e4, et tarvitse t\u00e4t\u00e4. Jos olet luonut ja testannut SSH-avainparin, jatka esimerkiksi Soolok\u00e4ytt\u00e4j\u00e4n ohjeeseen</p> <p>Mik\u00e4li k\u00e4yt\u00e4t useita eri avaimia, sinun pit\u00e4\u00e4 kertoa ssh-clientille, mit\u00e4 avainta k\u00e4ytet\u00e4\u00e4n mihinkin palveluun. T\u00e4m\u00e4 onnistuu manuaalisesti ssh-komennon parametrilla:</p> <pre><code>$ ssh -i ~/.ssh/id_keyfile user@host\n</code></pre> <p>Mik\u00e4li haluat luoda eri avaimet eri palveluja varten ja k\u00e4ytt\u00e4\u00e4 niit\u00e4 automaattisesti, tarvitset konfiguraatiotiedoston <code>~/.ssh/config</code>, jonka sis\u00e4lt\u00f6 on esimerkiksi. Tiedoston luominen on tarkkaa k\u00e4sipeli\u00e4 ja saattaa riippua esimerkiksi k\u00e4ytetyst\u00e4 k\u00e4ytt\u00f6j\u00e4rjestelm\u00e4st\u00e4 hieman. Mik\u00e4li sinulla ei ole tarvetta t\u00e4lle, \u00e4l\u00e4 tee sit\u00e4.</p> ~/.ssh/config<pre><code>Host github.com\n  IdentityFile ~/.ssh/github\n  IdentitiesOnly yes\nHost example.com\n  IdentityFile ~/.ssh/example\n  IdentitiesOnly yes\nHost short_alias\n  HostName some.very.long.aws.instance.name.amazonaws.com/\n  User ec2-user\n  Port 22\n  IdentityFile ~/.ssh/something\n  IdentitiesOnly yes\n</code></pre>"},{"location":"tunnistautuminen/ssh/yleist%C3%A4/","title":"Yleist\u00e4","text":"<p>SSH-avaimia k\u00e4ytt\u00e4ess\u00e4 on hyv\u00e4 ymm\u00e4rt\u00e4\u00e4, mit\u00e4 salausavaimilla salaaminen oikeastaan tarkoittaa. Symmetrisess\u00e4 salauksessa sek\u00e4 viestin salaajalla ett\u00e4 purkajalla on sama avain. Asymmetrisess\u00e4 salaukseen salaaja k\u00e4ytt\u00e4\u00e4 purjalta saatua julkista avainta, mutta salauksen voi purkaa ainoastaan purkajan hallussa olevalla yksityisell\u00e4 avaimella, joka on eri avain.</p> <p>My\u00f6hemmin luot <code>ssh-keygen</code>-komennolla oman asymmetrisen avainparin. Lue kuitenkin alta, mit\u00e4 julkinen ja yksityinen avain oikeastaan ovat.</p>"},{"location":"tunnistautuminen/ssh/yleist%C3%A4/#asymmetrinen-salaus-lyhyesti","title":"Asymmetrinen salaus lyhyesti","text":"<p>Aloitetaan symmetrisesta avaimesta, koska se on yksinkertaisempi. Kirjeen l\u00e4hett\u00e4minen numerolukollisessa salkussa on reaalimaailman analogia symmetriseen salaukseen.</p> <p></p> <p>Kuvio 1: DALL-E 3:n n\u00e4kemys numerolukollisesta salkusta postiauton kyydiss\u00e4.</p> <p>Ty\u00f6nkulku (ks. Kuvio 2) voi menn\u00e4 esimerkiksi n\u00e4in: l\u00e4hett\u00e4j\u00e4 asettaa kirjeen salkkuun, k\u00e4\u00e4nt\u00e4\u00e4 numerolukon asentoon <code>1234</code> ja painaa <code>LOCK</code>-n\u00e4pp\u00e4int\u00e4. Jatkossa lukon saa auki k\u00e4\u00e4nt\u00e4m\u00e4ll\u00e4 numerot samaan asentoon, eli <code>1234</code>, ja painamalla <code>UNLOCK</code>-n\u00e4pp\u00e4int\u00e4. L\u00e4hett\u00e4j\u00e4 antaa laukun kuriirille. Kuinka l\u00e4hett\u00e4j\u00e4 ja vastaanottaja osaavat k\u00e4ytt\u00e4\u00e4 samaa numeroa? T\u00e4m\u00e4 pit\u00e4\u00e4 sopia toista keskustelukanavaa, kuten tekstiviesti\u00e4, k\u00e4ytt\u00e4en. Mik\u00e4li joku ulkopuolinen, kuten kuriiri, kaappaa tekstiviestin, ulkopuolisella ei ole mit\u00e4\u00e4n ongelmia avata laukkua ja lukea kirjeen sis\u00e4lt\u00f6\u00e4.</p> <p></p> <p>Kuvio 2: Symmetrinen salaus selitettyn\u00e4 salkun numerolukon avulla. Punainen teksti edustaa salaista tietoa, keltainen julkisesti saatavilla olevaa tietoa.</p> <p>Asymmetrinen salaus toimii analogiassa hieman heikosti, mutta k\u00e4ytet\u00e4\u00e4n kuvitteellista lukkoa apuna. Kuvitellaan salkku, jossa on asymmetrinen numerolukko br\u00e4ndilt\u00e4\u00e4n <code>amazing-o-lock</code>. Numerolukossa on kaksi erillist\u00e4 avainkentt\u00e4\u00e4: 4-numeroinen lukitusavain ja 6-numeroinen purkuavain. Jokaista 4-numeroista lukitusavainta vastaa yksi 6-numeroinen purkuavain. L\u00e4hett\u00e4j\u00e4 asettaa kirjeen salkkuun, k\u00e4\u00e4nt\u00e4\u00e4 numerolukon asentoon <code>1234</code> ja painaa <code>LOCK</code>-n\u00e4pp\u00e4int\u00e4. Jatkossa lukkoa ei saa auki samalla <code>1234</code>-numerosarjalla. L\u00e4hett\u00e4j\u00e4 ei saa laatikkoa omine tietoineen en\u00e4\u00e4 auki. L\u00e4hett\u00e4j\u00e4 antaa laukun kuriirille. Kuinka l\u00e4hett\u00e4j\u00e4 tiet\u00e4\u00e4 k\u00e4ytt\u00e4\u00e4 oikeaa numeroa? Helposti. Vastaanottaja voi kailottaa oman julkisen avaimensa julkisesti koko maailmalle. Se voisi l\u00f6yty\u00e4 vastaanottajan nettisivuilta, k\u00e4yntikortista, t-paidasta ja puhelinluettelosta. Sen sijaan salaista avainta vastaanottaja ei luovuta kenellek\u00e4\u00e4n ulkopuoliselle.</p> <p></p> <p>Kuvio 3: Asymmetrinen salaus selitettyn\u00e4 salkun numerolukon avulla. Punainen teksti edustaa salaista tietoa, keltainen julkisesti saatavilla olevaa tietoa.</p> <p>Info</p> <p>Yll\u00e4 olevissa esimerkeiss\u00e4 numerolukossa eli kombinaatiolukossa oli vain <code>4</code> digitti\u00e4 valittavana, joten kombinaatioita l\u00f6ytyisi <code>10 potensssiin 4</code> eli <code>10,000</code> kappaletta. Todellisuudessa salauksessa k\u00e4ytett\u00e4v\u00e4t avaimet ovat merkitt\u00e4v\u00e4sti monimutkaisempia. T\u00e4m\u00e4n hetken parhaan k\u00e4yt\u00e4nn\u00f6n eli Ed25519-salausalgoritmin arvojen avaruus on suunnilleen <code>57,896,044,618,658,097,711,785,492,504,343,953,926,634,992,332,820,282,019,728,792,003,956,564,819,949</code>.</p>"},{"location":"tunnistautuminen/ssh/yleist%C3%A4/#kuinka-monta-avainta-tarvitaan","title":"Kuinka monta avainta tarvitaan?","text":"<p>K\u00e4ytt\u00e4j\u00e4 voi p\u00e4\u00e4tt\u00e4\u00e4 luoda useat eri avainparin tai k\u00e4ytt\u00e4\u00e4 yht\u00e4 avainparia joka k\u00e4ytt\u00f6tarkoituksessa. Yll\u00e4 olevassa salkkuesimerkiss\u00e4 Vastaanottaja voisi esimerkiksi k\u00e4ytt\u00e4\u00e4 Raahen osoitteessa yht\u00e4 avainparia, ja Kajaanin osoitteessa toista avainparia. T\u00e4ll\u00f6in avain vastaisia identiteetti\u00e4, jonka m\u00e4\u00e4ritelm\u00e4 on <code>(henkil\u00f6 + osoite)</code>.</p> <p>Tietokoneiden kanssa ssh-avaimia voi luoda esimerkiksi yhden per k\u00e4ytt\u00e4j\u00e4, tai yhden per k\u00e4ytt\u00e4j\u00e4n s\u00e4hk\u00f6posti, tai yhden per k\u00e4ytt\u00e4j\u00e4n tietokone. Julkiselle avaimelle annetaan yleisesti kommentti, joten k\u00e4ytet\u00e4\u00e4n t\u00e4m\u00e4n kommenttikent\u00e4n mahdollista arvoa selitt\u00e4m\u00e4\u00e4n eri vaihtoehdot. N\u00e4it\u00e4 vaihtoehtoja ovat muiden muassa seuraavat:</p> <p>Suositeltu tapa: Yksi avain per tietokone</p> <ul> <li>Kommentti: <code>nimi@kamk.fi laptop</code></li> <li>... tai kommentti <code>nimi@kamk.fi TAxxLxx</code></li> <li>Luot joka tietokoneelle oman ssh-avainparin ja lis\u00e4\u00e4t julkisen avaimen jokaiseen paikkaan, mihin haluat sill\u00e4 koneella autentikoitua.</li> </ul> Vaihtoehtoinen tapa: Yksi avain per ihminen <ul> <li>Kommentti: <code>nimi@kamk.fi</code></li> <li>K\u00e4yt\u00e4t t\u00e4t\u00e4 yht\u00e4 avainta kotona ja koulussa aivan joka koneella. Kopioit sit\u00e4 paikasta toiseen jollakin turvallisella tavalla.</li> <li>Ty\u00f6l\u00e4s kopioida ja pit\u00e4\u00e4 salassa.</li> </ul> Vaihtoehtoinen tapa: Yksi avain per palvelu <ul> <li>Kommentit: <ul> <li><code>min\u00e4 gitlab-dclab</code></li> <li><code>min\u00e4 gitlab-kamit</code></li> </ul> </li> <li>K\u00e4yt\u00e4t eri avainta per eri GitLab palvelu. Kopioit avaimia paikasta toiseen jollakin turvallisella tavalla.</li> <li>Ty\u00f6l\u00e4s kopioida ja pit\u00e4\u00e4 salassa.</li> <li>...mutta joskus pakollinen! Ehk\u00e4 palvelu A vaatii ed_id25519 algoritmia ja toinen vaatii 2048-bittist\u00e4 RSA-avainta.</li> </ul> <p>Saat itse p\u00e4\u00e4tt\u00e4\u00e4 oman turvallisuustasosi, mutta suositus on k\u00e4ytt\u00e4\u00e4 yht\u00e4 avainta per tietokone. T\u00e4ll\u00f6in muoto on <code>etunimisukunimi@kamk.fi tietokone</code>. Syy t\u00e4lle on se, ett\u00e4 uuden tietokoneen k\u00e4ytt\u00f6\u00f6notto on jatkossa todella helppoa: luo avain ja lis\u00e4\u00e4 se k\u00e4ytt\u00e4m\u00e4\u00e4si git-palveluun. Voi olla, ett\u00e4 joudut poikkeamaan t\u00e4st\u00e4 viel\u00e4 joskus. Esimerkiksi Azure VM ja CSC:n portaali eiv\u00e4t v\u00e4ltt\u00e4m\u00e4tt\u00e4 tue GitLabin suosittelemaa ed_25519 algoritmia.</p>"}]}